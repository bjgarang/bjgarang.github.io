



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.1, mkdocs-material-3.0.3">
    
    
      
        <title>matplotlib中文乱码问题</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../#_1" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="My Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                My Docs
              </span>
              <span class="md-header-nav__topic">
                matplotlib中文乱码问题
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="My Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="首页" class="md-nav__link">
      首页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      生活
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        生活
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../生活/life/" title="首页" class="md-nav__link">
      首页
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      计算机
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        计算机
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1" checked>
    
    <label class="md-nav__link" for="nav-3-1">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        matplotlib中文乱码问题
      </label>
    
    <a href="./" title="matplotlib中文乱码问题" class="md-nav__link md-nav__link--active">
      matplotlib中文乱码问题
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="一、环境" class="md-nav__link">
    一、环境
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="二、现象" class="md-nav__link">
    二、现象
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" title="三、原因" class="md-nav__link">
    三、原因
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1matplotlib" title="1、matplotlib库中已支持的字体" class="md-nav__link">
    1、matplotlib库中已支持的字体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" title="2、字体名所代表的具体字体" class="md-nav__link">
    2、字体名所代表的具体字体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mac" title="四、解决方法(以mac为例)" class="md-nav__link">
    四、解决方法(以mac为例)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" title="1、使中文字体被加载到" class="md-nav__link">
    1、使中文字体被加载到
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" title="1.1、下载中文字体" class="md-nav__link">
    1.1、下载中文字体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" title="1.2、重新加载字体" class="md-nav__link">
    1.2、重新加载字体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" title="2、设置字体" class="md-nav__link">
    2、设置字体
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21pltrcparams" title="2.1、plt.rcParams设置默认字体" class="md-nav__link">
    2.1、plt.rcParams设置默认字体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22font_manager" title="2.2、font_manager设置局部字体" class="md-nav__link">
    2.2、font_manager设置局部字体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" title="3、查看效果" class="md-nav__link">
    3、查看效果
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../列表和元组/" title="列表和元组" class="md-nav__link">
      列表和元组
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../基础知识/" title="基础知识" class="md-nav__link">
      基础知识
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../字典/" title="字典" class="md-nav__link">
      字典
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../字符串/" title="字符串" class="md-nav__link">
      字符串
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="一、环境" class="md-nav__link">
    一、环境
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="二、现象" class="md-nav__link">
    二、现象
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" title="三、原因" class="md-nav__link">
    三、原因
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1matplotlib" title="1、matplotlib库中已支持的字体" class="md-nav__link">
    1、matplotlib库中已支持的字体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" title="2、字体名所代表的具体字体" class="md-nav__link">
    2、字体名所代表的具体字体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mac" title="四、解决方法(以mac为例)" class="md-nav__link">
    四、解决方法(以mac为例)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" title="1、使中文字体被加载到" class="md-nav__link">
    1、使中文字体被加载到
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" title="1.1、下载中文字体" class="md-nav__link">
    1.1、下载中文字体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" title="1.2、重新加载字体" class="md-nav__link">
    1.2、重新加载字体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" title="2、设置字体" class="md-nav__link">
    2、设置字体
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21pltrcparams" title="2.1、plt.rcParams设置默认字体" class="md-nav__link">
    2.1、plt.rcParams设置默认字体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22font_manager" title="2.2、font_manager设置局部字体" class="md-nav__link">
    2.2、font_manager设置局部字体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" title="3、查看效果" class="md-nav__link">
    3、查看效果
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>matplotlib中文乱码问题</h1>
                
                <h2 id="_1">一、环境<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>OS：<em>macOS</em> <em>High</em> <em>Sierra</em> 10.13.6</p>
<p>python：v2.7.15</p>
<p>matplotlib：v2.2.3</p>
<h2 id="_2">二、现象<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p><img alt="matplotlib" src="../../../img/matplotlib.png" /></p>
<p>如上图所示，使用matplotlib库生成的图中，中文文字无法正常显示（乱码）。经过一番摸索，解决方案总结如下：</p>
<h2 id="_3">三、原因<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>之所以中文会乱码，是因为matplotlib默认使用的字体列表中是没有中文字体的，且matplotlib默认使用的字体不支持中文。</p>
<h3 id="1matplotlib">1、matplotlib库中已支持的字体<a class="headerlink" href="#1matplotlib" title="Permanent link">&para;</a></h3>
<p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">列出所有已支持的字体文件名</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span>
<span class="n">a</span><span class="o">=</span><span class="nb">sorted</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">font_manager</span><span class="o">.</span><span class="n">fontManager</span><span class="o">.</span><span class="n">ttflist</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">i</span>
</pre></div>
</td></tr></table>
执行上面的py文件，会输出以下matlibplot已加载到的所有字体列表,从列表中可以查看是否有中文字体。</p>
<details class="note"><summary>字体列表(点击展开)</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="na">.Keyboard</span>
<span class="na">.LastResort</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Display</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Rounded</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">Compact</span> <span class="no">Text</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Display</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Text</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Text</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Text</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Text</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Text</span> <span class="no">Condensed</span>
<span class="na">.SF</span> <span class="no">NS</span> <span class="no">Text</span> <span class="no">Condensed</span>
<span class="nf">Andale</span> <span class="no">Mono</span>
<span class="nf">Apple</span> <span class="no">Braille</span>
<span class="nf">Apple</span> <span class="no">Braille</span>
<span class="nf">Apple</span> <span class="no">Braille</span>
<span class="nf">Apple</span> <span class="no">Braille</span>
<span class="nf">Apple</span> <span class="no">Braille</span>
<span class="nf">Apple</span> <span class="no">Chancery</span>
<span class="nf">Apple</span> <span class="no">Symbols</span>
<span class="nf">AppleGothic</span>
<span class="nf">AppleMyungjo</span>
<span class="nf">Arial</span>
<span class="nf">Arial</span>
<span class="nf">Arial</span>
<span class="nf">Arial</span>
<span class="nf">Arial</span> <span class="no">Black</span>
<span class="nf">Arial</span> <span class="no">Narrow</span>
<span class="nf">Arial</span> <span class="no">Narrow</span>
<span class="nf">Arial</span> <span class="no">Narrow</span>
<span class="nf">Arial</span> <span class="no">Narrow</span>
<span class="nf">Arial</span> <span class="no">Rounded</span> <span class="no">MT</span> <span class="no">Bold</span>
<span class="nf">Arial</span> <span class="no">Unicode</span> <span class="no">MS</span>
<span class="nf">Ayuthaya</span>
<span class="nf">Big</span> <span class="no">Caslon</span>
<span class="nf">Bodoni</span> <span class="mi">72</span> <span class="no">Smallcaps</span>
<span class="nf">Bodoni</span> <span class="no">Ornaments</span>
<span class="nf">Bradley</span> <span class="no">Hand</span>
<span class="nf">Brush</span> <span class="no">Script</span> <span class="no">MT</span>
<span class="nf">Chalkduster</span>
<span class="nf">Comic</span> <span class="no">Sans</span> <span class="no">MS</span>
<span class="nf">Comic</span> <span class="no">Sans</span> <span class="no">MS</span>
<span class="nf">Courier</span> <span class="no">New</span>
<span class="nf">Courier</span> <span class="no">New</span>
<span class="nf">Courier</span> <span class="no">New</span>
<span class="nf">Courier</span> <span class="no">New</span>
<span class="nf">DIN</span> <span class="no">Alternate</span>
<span class="nf">DIN</span> <span class="no">Condensed</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span> <span class="no">Display</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span> <span class="no">Mono</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span> <span class="no">Mono</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span> <span class="no">Mono</span>
<span class="nf">DejaVu</span> <span class="no">Sans</span> <span class="no">Mono</span>
<span class="nf">DejaVu</span> <span class="no">Serif</span>
<span class="nf">DejaVu</span> <span class="no">Serif</span>
<span class="nf">DejaVu</span> <span class="no">Serif</span>
<span class="nf">DejaVu</span> <span class="no">Serif</span>
<span class="nf">DejaVu</span> <span class="no">Serif</span> <span class="no">Display</span>
<span class="nf">Diwan</span> <span class="no">Thuluth</span>
<span class="nf">Farisi</span>
<span class="nf">Georgia</span>
<span class="nf">Georgia</span>
<span class="nf">Georgia</span>
<span class="nf">Georgia</span>
<span class="nf">Gurmukhi</span> <span class="no">MT</span>
<span class="nf">Herculanum</span>
<span class="nf">Hoefler</span> <span class="no">Text</span>
<span class="nf">Impact</span>
<span class="nf">Khmer</span> <span class="no">Sangam</span> <span class="no">MN</span>
<span class="nf">Kokonor</span>
<span class="nf">Krungthep</span>
<span class="nf">Lao</span> <span class="no">Sangam</span> <span class="no">MN</span>
<span class="nf">Luminari</span>
<span class="nf">Microsoft</span> <span class="no">Sans</span> <span class="no">Serif</span>
<span class="nf">Mishafi</span>
<span class="nf">Mishafi</span> <span class="no">Gold</span>
<span class="nf">Plantagenet</span> <span class="no">Cherokee</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXGeneral</span>
<span class="nf">STIXIntegralsD</span>
<span class="nf">STIXIntegralsD</span>
<span class="nf">STIXIntegralsSm</span>
<span class="nf">STIXIntegralsSm</span>
<span class="nf">STIXIntegralsUp</span>
<span class="nf">STIXIntegralsUp</span>
<span class="nf">STIXIntegralsUpD</span>
<span class="nf">STIXIntegralsUpD</span>
<span class="nf">STIXIntegralsUpSm</span>
<span class="nf">STIXIntegralsUpSm</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXNonUnicode</span>
<span class="nf">STIXSizeFiveSym</span>
<span class="nf">STIXSizeFiveSym</span>
<span class="nf">STIXSizeFourSym</span>
<span class="nf">STIXSizeFourSym</span>
<span class="nf">STIXSizeFourSym</span>
<span class="nf">STIXSizeFourSym</span>
<span class="nf">STIXSizeOneSym</span>
<span class="nf">STIXSizeOneSym</span>
<span class="nf">STIXSizeOneSym</span>
<span class="nf">STIXSizeOneSym</span>
<span class="nf">STIXSizeThreeSym</span>
<span class="nf">STIXSizeThreeSym</span>
<span class="nf">STIXSizeThreeSym</span>
<span class="nf">STIXSizeThreeSym</span>
<span class="nf">STIXSizeTwoSym</span>
<span class="nf">STIXSizeTwoSym</span>
<span class="nf">STIXSizeTwoSym</span>
<span class="nf">STIXSizeTwoSym</span>
<span class="nf">STIXVariants</span>
<span class="nf">STIXVariants</span>
<span class="nf">Sathu</span>
<span class="nf">Silom</span>
<span class="nf">Skia</span>
<span class="nf">Source</span> <span class="no">Han</span> <span class="no">Sans</span> <span class="no">CN</span>
<span class="nf">Symbol</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">System</span> <span class="no">Font</span>
<span class="nf">Tahoma</span>
<span class="nf">Tahoma</span>
<span class="nf">TeamViewer12</span>
<span class="nf">Times</span> <span class="no">New</span> <span class="no">Roman</span>
<span class="nf">Times</span> <span class="no">New</span> <span class="no">Roman</span>
<span class="nf">Times</span> <span class="no">New</span> <span class="no">Roman</span>
<span class="nf">Times</span> <span class="no">New</span> <span class="no">Roman</span>
<span class="nf">Trattatello</span>
<span class="nf">Trebuchet</span> <span class="no">MS</span>
<span class="nf">Trebuchet</span> <span class="no">MS</span>
<span class="nf">Trebuchet</span> <span class="no">MS</span>
<span class="nf">Trebuchet</span> <span class="no">MS</span>
<span class="nf">Verdana</span>
<span class="nf">Verdana</span>
<span class="nf">Verdana</span>
<span class="nf">Verdana</span>
<span class="nf">Webdings</span>
<span class="nf">Wingdings</span>
<span class="nf">Wingdings</span> <span class="mi">2</span>
<span class="nf">Wingdings</span> <span class="mi">3</span>
<span class="nf">Zapf</span> <span class="no">Dingbats</span>
<span class="nf">Zapfino</span>
<span class="nf">cmb10</span>
<span class="nf">cmex10</span>
<span class="nf">cmmi10</span>
<span class="nf">cmr10</span>
<span class="nf">cmss10</span>
<span class="nf">cmsy10</span>
<span class="nf">cmtt10</span>
</pre></div>
</td></tr></table>
</details><h3 id="2">2、字体名所代表的具体字体<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p>每个英文名具体代表的是系统中的哪个字体，可以从<code>~/.matplotlib/fontList.json</code>文件中查看，以上面列表末尾的<code>cmtt10</code>为例，可以看到<code>cmtt10</code>对应的配置为：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;style&quot;</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cmtt10&quot;</span><span class="p">,</span>
  <span class="nt">&quot;weight&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
  <span class="nt">&quot;fname&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/local/lib/python2.7/site-packages/matplotlib/mpl-data/fonts/ttf/cmtt10.ttf&quot;</span><span class="p">,</span>
  <span class="nt">&quot;stretch&quot;</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
  <span class="nt">&quot;_class&quot;</span><span class="p">:</span> <span class="s2">&quot;FontEntry&quot;</span><span class="p">,</span>
  <span class="nt">&quot;variant&quot;</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
  <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;scalable&quot;</span>
<span class="p">}</span><span class="err">,</span>
</pre></div>
</td></tr></table>

<p>显而易见，<code>cmtt10</code>对应的具体字体文件为<code>/usr/local/lib/python2.7/site-packages/matplotlib/mpl-data/fonts/ttf/cmtt10.ttf</code></p>
<h2 id="mac">四、解决方法(以mac为例)<a class="headerlink" href="#mac" title="Permanent link">&para;</a></h2>
<p>通过以上的原因分析，我们要解决中文乱码的问题，要做以下操作：</p>
<h3 id="1">1、使中文字体被加载到<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<details class="note"><summary>font_manager.py分析(点击展开)</summary><p>根据<code>font_manager.py</code>中的<code>get_fontext_synonyms</code>函数的定义：
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_fontext_synonyms</span><span class="p">(</span><span class="n">fontext</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of file extensions extensions that are synonyms for</span>
<span class="sd">    the given file extension *fileext*.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;ttf&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ttf&#39;</span><span class="p">,</span> <span class="s1">&#39;otf&#39;</span><span class="p">),</span>
            <span class="s1">&#39;otf&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ttf&#39;</span><span class="p">,</span> <span class="s1">&#39;otf&#39;</span><span class="p">),</span>
            <span class="s1">&#39;afm&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;afm&#39;</span><span class="p">,)}[</span><span class="n">fontext</span><span class="p">]</span>
</pre></div>
</td></tr></table>
<code>font_manager.py</code>中<code>OSXFontDirectories</code>列表定义的字体目录如下：
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">OSXFontDirectories</span> <span class="o">=</span> <span class="p">[</span>
   <span class="s2">&quot;/Library/Fonts/&quot;</span><span class="p">,</span>
   <span class="s2">&quot;/Network/Library/Fonts/&quot;</span><span class="p">,</span>
   <span class="s2">&quot;/System/Library/Fonts/&quot;</span><span class="p">,</span>
   <span class="c1"># fonts installed via MacPorts</span>
   <span class="s2">&quot;/opt/local/share/fonts&quot;</span>
   <span class="s2">&quot;&quot;</span>
</pre></div>
</td></tr></table>
因此，matplotlib只会去<code>/Library/Fonts/</code>、<code>Network/Library/Fonts/</code>、<code>/System/Library/Fonts/</code>、<code>/opt/local/share/fonts</code>、<code>$PYTHON_PATH/site-packages/matplotlib/mpl-data/fonts/ttf</code>、<code>$PYTHON_PATH/site-packages/matplotlib/mpl-data/fonts/afm</code>这些目录下面加载<code>.ttf</code>、<code>.otf</code>和<code>.afm</code>三种后缀的字体文件</p></details><h4 id="11">1.1、下载中文字体<a class="headerlink" href="#11" title="Permanent link">&para;</a></h4>
<p>下载<code>.ttf</code>格式的中文字体到<code>/Library/Fonts/</code>目录中,具体方法请自行百度。</p>
<h4 id="12">1.2、重新加载字体<a class="headerlink" href="#12" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">as</span> <span class="nn">fm</span>
<span class="n">fm</span><span class="o">.</span><span class="n">_rebuild</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p><a href="#1matplotlib">再次查看已加载到的字体列表</a>，验证新下载的字体是否已经被加载到</p>
<h3 id="2_1">2、设置字体<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<h4 id="21pltrcparams">2.1、plt.rcParams设置默认字体<a class="headerlink" href="#21pltrcparams" title="Permanent link">&para;</a></h4>
<p>在<code>.py</code>文件中通过<code>plt.rcParams</code>设置matplotlib库使用的默认字体</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.family&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Source Han Sans CN&#39;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;示例&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;时间&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;卡顿率&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;乐视卡顿率&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<h4 id="22font_manager">2.2、font_manager设置局部字体<a class="headerlink" href="#22font_manager" title="Permanent link">&para;</a></h4>
<blockquote>
<p>此方法可以省略上面的<code>fm._rebuild()</code>，但此方法有个缺陷就是不能在<code>plt.plot</code>中添加<code>fontpropertie</code>属性。</p>
</blockquote>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">as</span> <span class="nn">fm</span>

<span class="n">fontpath</span> <span class="o">=</span> <span class="s1">&#39;/Library/Fonts/Songti.ttc&#39;</span>
<span class="n">myfont</span> <span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">fontpath</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;时间&#39;</span><span class="p">,</span><span class="n">fontproperties</span><span class="o">=</span><span class="n">myfont</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;卡顿率&#39;</span><span class="p">,</span><span class="n">fontproperties</span><span class="o">=</span><span class="n">myfont</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;乐视卡顿率&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<h3 id="3">3、查看效果<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<p><img alt="最终效果" src="../../../img/matplotlib_cn.png" /></p>
<p>可以看到，中文字体已经被正确显示出来。</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../../生活/life/" title="首页" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                首页
              </span>
            </div>
          </a>
        
        
          <a href="../列表和元组/" title="列表和元组" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                列表和元组
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.1",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>