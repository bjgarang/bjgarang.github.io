



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.1, mkdocs-material-3.0.3">
    
    
      
        <title>Dstor数据访问接口定义 - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#dstor" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="My Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                My Docs
              </span>
              <span class="md-header-nav__topic">
                Dstor数据访问接口定义
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="My Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="首页" class="md-nav__link">
      首页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      生活
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        生活
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../生活/life/" title="首页" class="md-nav__link">
      首页
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      计算机
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        计算机
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Dstor数据访问接口定义
      </label>
    
    <a href="./" title="Dstor数据访问接口定义" class="md-nav__link md-nav__link--active">
      Dstor数据访问接口定义
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#toc" title="TOC" class="md-nav__link">
    TOC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" title="一、支持的操作列表" class="md-nav__link">
    一、支持的操作列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="二、公共请求头部" class="md-nav__link">
    二、公共请求头部
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" title="三、公共响应状态码" class="md-nav__link">
    三、公共响应状态码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="四、接口详细说明" class="md-nav__link">
    四、接口详细说明
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1service" title="1、关于Service的操作" class="md-nav__link">
    1、关于Service的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11get-service" title="1.1、GET Service" class="md-nav__link">
    1.1、GET Service
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" title="1.1.1、请求语法" class="md-nav__link">
    1.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112" title="1.1.2、请求参数" class="md-nav__link">
    1.1.2、请求参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113response-elements" title="1.1.3、响应元素(Response Elements)" class="md-nav__link">
    1.1.3、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114" title="1.1.4、细节分析" class="md-nav__link">
    1.1.4、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#115" title="1.1.5、示例" class="md-nav__link">
    1.1.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2bucket" title="2、关于bucket的操作" class="md-nav__link">
    2、关于bucket的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21put-bucket" title="2.1、PUT Bucket" class="md-nav__link">
    2.1、PUT Bucket
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211" title="2.1.1、请求语法" class="md-nav__link">
    2.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212" title="2.1.2、细节分析" class="md-nav__link">
    2.1.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213" title="2.1.3、示例" class="md-nav__link">
    2.1.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22delete-bucket" title="2.2、DELETE Bucket" class="md-nav__link">
    2.2、DELETE Bucket
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221" title="2.2.1、请求语法" class="md-nav__link">
    2.2.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222" title="2.2.2、细节分析" class="md-nav__link">
    2.2.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223" title="2.2.3、示例" class="md-nav__link">
    2.2.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23head-bucket" title="2.3、HEAD Bucket" class="md-nav__link">
    2.3、HEAD Bucket
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" title="2.3.1、请求语法" class="md-nav__link">
    2.3.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" title="2.3.2、细节分析" class="md-nav__link">
    2.3.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233" title="2.3.3、示例" class="md-nav__link">
    2.3.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24get-bucketlist-object" title="2.4、Get Bucket(List Object)" class="md-nav__link">
    2.4、Get Bucket(List Object)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241" title="2.4.1、请求语法" class="md-nav__link">
    2.4.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#242" title="2.4.2、请求参数" class="md-nav__link">
    2.4.2、请求参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#243response-elements" title="2.4.3、响应元素(Response Elements)" class="md-nav__link">
    2.4.3、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#244" title="2.4.4、细节分析" class="md-nav__link">
    2.4.4、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#245" title="2.4.5、示例" class="md-nav__link">
    2.4.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25put-bucket-lifecycle" title="2.5、Put Bucket Lifecycle" class="md-nav__link">
    2.5、Put Bucket Lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#251" title="2.5.1、请求语法" class="md-nav__link">
    2.5.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#252request-elements" title="2.5.2、请求元素(Request Elements)" class="md-nav__link">
    2.5.2、请求元素(Request Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#253" title="2.5.3、细节分析" class="md-nav__link">
    2.5.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#254" title="2.5.4、示例" class="md-nav__link">
    2.5.4、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26get-bucket-lifecycle" title="2.6、Get Bucket Lifecycle" class="md-nav__link">
    2.6、Get Bucket Lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#261" title="2.6.1、请求语法" class="md-nav__link">
    2.6.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#262" title="2.6.2、细节分析" class="md-nav__link">
    2.6.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#263" title="2.6.3、示例" class="md-nav__link">
    2.6.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27delete-bucket-lifecycle" title="2.7、Delete Bucket Lifecycle" class="md-nav__link">
    2.7、Delete Bucket Lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#271" title="2.7.1、请求语法" class="md-nav__link">
    2.7.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#272" title="2.7.2、细节分析" class="md-nav__link">
    2.7.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#273" title="2.7.3、示例" class="md-nav__link">
    2.7.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3object" title="3、关于object的操作" class="md-nav__link">
    3、关于object的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31put-object" title="3.1、PUT Object" class="md-nav__link">
    3.1、PUT Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311" title="3.1.1、请求语法" class="md-nav__link">
    3.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312header" title="3.1.2、请求Header" class="md-nav__link">
    3.1.2、请求Header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313" title="3.1.3、细节分析" class="md-nav__link">
    3.1.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#314content-md5" title="3.1.4、Content-MD5计算规则" class="md-nav__link">
    3.1.4、Content-MD5计算规则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#315" title="3.1.5、示例" class="md-nav__link">
    3.1.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32head-object" title="3.2、HEAD Object" class="md-nav__link">
    3.2、HEAD Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321" title="3.2.1、请求语法" class="md-nav__link">
    3.2.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" title="3.2.2、细节分析" class="md-nav__link">
    3.2.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" title="3.2.3、示例" class="md-nav__link">
    3.2.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33get-object" title="3.3、GET Object" class="md-nav__link">
    3.3、GET Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331" title="3.3.1、请求语法" class="md-nav__link">
    3.3.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332header" title="3.3.2、请求Header" class="md-nav__link">
    3.3.2、请求Header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333" title="3.3.3、细节分析" class="md-nav__link">
    3.3.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#334" title="3.3.4、示例" class="md-nav__link">
    3.3.4、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34delete-object" title="3.4、DELETE Object" class="md-nav__link">
    3.4、DELETE Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341" title="3.4.1、请求语法" class="md-nav__link">
    3.4.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342" title="3.4.2、细节分析" class="md-nav__link">
    3.4.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343" title="3.4.3、示例" class="md-nav__link">
    3.4.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35copy-object" title="3.5、Copy Object" class="md-nav__link">
    3.5、Copy Object
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4multipart-upload" title="4、关于Multipart Upload的操作" class="md-nav__link">
    4、关于Multipart Upload的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41initiate-multipart-upload" title="4.1、Initiate Multipart Upload" class="md-nav__link">
    4.1、Initiate Multipart Upload
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411" title="4.1.1、请求语法" class="md-nav__link">
    4.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412response-elements" title="4.1.2、响应元素(Response Elements)" class="md-nav__link">
    4.1.2、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#413" title="4.1.3、细节分析" class="md-nav__link">
    4.1.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#414" title="4.1.4、示例" class="md-nav__link">
    4.1.4、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42upload-part" title="4.2、Upload Part" class="md-nav__link">
    4.2、Upload Part
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421" title="4.2.1、请求语法" class="md-nav__link">
    4.2.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422" title="4.2.2、细节分析" class="md-nav__link">
    4.2.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423" title="4.2.3、示例" class="md-nav__link">
    4.2.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43complete-multipart-upload" title="4.3、Complete Multipart Upload" class="md-nav__link">
    4.3、Complete Multipart Upload
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431" title="4.3.1、请求语法" class="md-nav__link">
    4.3.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432request-parameters" title="4.3.2、请求参数(Request Parameters)" class="md-nav__link">
    4.3.2、请求参数(Request Parameters)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433request-elements" title="4.3.3、请求元素(Request Elements)" class="md-nav__link">
    4.3.3、请求元素(Request Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434response-elements" title="4.3.4、响应元素(Response Elements)" class="md-nav__link">
    4.3.4、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#435" title="4.3.5、细节分析" class="md-nav__link">
    4.3.5、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#436" title="4.3.6、示例" class="md-nav__link">
    4.3.6、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44abort-multipart-upload" title="4.4、Abort Multipart Upload" class="md-nav__link">
    4.4、Abort Multipart Upload
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441" title="4.4.1、请求语法" class="md-nav__link">
    4.4.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#442" title="4.4.2、细节分析" class="md-nav__link">
    4.4.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#443" title="4.4.3、示例" class="md-nav__link">
    4.4.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45list-parts" title="4.5、List Parts" class="md-nav__link">
    4.5、List Parts
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#451" title="4.5.1、请求语法" class="md-nav__link">
    4.5.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#452request-parameters" title="4.5.2、请求参数(Request Parameters)" class="md-nav__link">
    4.5.2、请求参数(Request Parameters)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#453response-elements" title="4.5.3、响应元素(Response Elements)" class="md-nav__link">
    4.5.3、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#454" title="4.5.4、细节分析" class="md-nav__link">
    4.5.4、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#455" title="4.5.5、示例" class="md-nav__link">
    4.5.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../linux/ELK/" title="ELK+filebeat+kafka日志分析系统" class="md-nav__link">
      ELK+filebeat+kafka日志分析系统
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux/linux里面以指定用户运行命令/" title="linux里面以指定用户运行命令" class="md-nav__link">
      linux里面以指定用户运行命令
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux/使ApacheBench支持multi-url/" title="使ApacheBench支持multi url" class="md-nav__link">
      使ApacheBench支持multi url
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux/关于file-max和file-nr/" title="/proc/sys/fs/file-max" class="md-nav__link">
      /proc/sys/fs/file-max
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux/编译安装kafka_exporter/" title="kafka_exporter" class="md-nav__link">
      kafka_exporter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../python/matplotlib中文/" title="Matplotlib中文" class="md-nav__link">
      Matplotlib中文
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python/列表和元组/" title="列表和元组" class="md-nav__link">
      列表和元组
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python/基础知识/" title="基础知识" class="md-nav__link">
      基础知识
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python/字典/" title="字典" class="md-nav__link">
      字典
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python/字符串/" title="字符串" class="md-nav__link">
      字符串
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      网络
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        网络
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../网络/TCP-IP/" title="TCP IP" class="md-nav__link">
      TCP IP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#toc" title="TOC" class="md-nav__link">
    TOC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" title="一、支持的操作列表" class="md-nav__link">
    一、支持的操作列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="二、公共请求头部" class="md-nav__link">
    二、公共请求头部
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" title="三、公共响应状态码" class="md-nav__link">
    三、公共响应状态码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="四、接口详细说明" class="md-nav__link">
    四、接口详细说明
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1service" title="1、关于Service的操作" class="md-nav__link">
    1、关于Service的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11get-service" title="1.1、GET Service" class="md-nav__link">
    1.1、GET Service
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" title="1.1.1、请求语法" class="md-nav__link">
    1.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112" title="1.1.2、请求参数" class="md-nav__link">
    1.1.2、请求参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113response-elements" title="1.1.3、响应元素(Response Elements)" class="md-nav__link">
    1.1.3、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114" title="1.1.4、细节分析" class="md-nav__link">
    1.1.4、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#115" title="1.1.5、示例" class="md-nav__link">
    1.1.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2bucket" title="2、关于bucket的操作" class="md-nav__link">
    2、关于bucket的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21put-bucket" title="2.1、PUT Bucket" class="md-nav__link">
    2.1、PUT Bucket
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211" title="2.1.1、请求语法" class="md-nav__link">
    2.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212" title="2.1.2、细节分析" class="md-nav__link">
    2.1.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213" title="2.1.3、示例" class="md-nav__link">
    2.1.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22delete-bucket" title="2.2、DELETE Bucket" class="md-nav__link">
    2.2、DELETE Bucket
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221" title="2.2.1、请求语法" class="md-nav__link">
    2.2.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222" title="2.2.2、细节分析" class="md-nav__link">
    2.2.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223" title="2.2.3、示例" class="md-nav__link">
    2.2.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23head-bucket" title="2.3、HEAD Bucket" class="md-nav__link">
    2.3、HEAD Bucket
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" title="2.3.1、请求语法" class="md-nav__link">
    2.3.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" title="2.3.2、细节分析" class="md-nav__link">
    2.3.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233" title="2.3.3、示例" class="md-nav__link">
    2.3.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24get-bucketlist-object" title="2.4、Get Bucket(List Object)" class="md-nav__link">
    2.4、Get Bucket(List Object)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241" title="2.4.1、请求语法" class="md-nav__link">
    2.4.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#242" title="2.4.2、请求参数" class="md-nav__link">
    2.4.2、请求参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#243response-elements" title="2.4.3、响应元素(Response Elements)" class="md-nav__link">
    2.4.3、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#244" title="2.4.4、细节分析" class="md-nav__link">
    2.4.4、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#245" title="2.4.5、示例" class="md-nav__link">
    2.4.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25put-bucket-lifecycle" title="2.5、Put Bucket Lifecycle" class="md-nav__link">
    2.5、Put Bucket Lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#251" title="2.5.1、请求语法" class="md-nav__link">
    2.5.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#252request-elements" title="2.5.2、请求元素(Request Elements)" class="md-nav__link">
    2.5.2、请求元素(Request Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#253" title="2.5.3、细节分析" class="md-nav__link">
    2.5.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#254" title="2.5.4、示例" class="md-nav__link">
    2.5.4、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26get-bucket-lifecycle" title="2.6、Get Bucket Lifecycle" class="md-nav__link">
    2.6、Get Bucket Lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#261" title="2.6.1、请求语法" class="md-nav__link">
    2.6.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#262" title="2.6.2、细节分析" class="md-nav__link">
    2.6.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#263" title="2.6.3、示例" class="md-nav__link">
    2.6.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27delete-bucket-lifecycle" title="2.7、Delete Bucket Lifecycle" class="md-nav__link">
    2.7、Delete Bucket Lifecycle
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#271" title="2.7.1、请求语法" class="md-nav__link">
    2.7.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#272" title="2.7.2、细节分析" class="md-nav__link">
    2.7.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#273" title="2.7.3、示例" class="md-nav__link">
    2.7.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3object" title="3、关于object的操作" class="md-nav__link">
    3、关于object的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31put-object" title="3.1、PUT Object" class="md-nav__link">
    3.1、PUT Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311" title="3.1.1、请求语法" class="md-nav__link">
    3.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312header" title="3.1.2、请求Header" class="md-nav__link">
    3.1.2、请求Header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313" title="3.1.3、细节分析" class="md-nav__link">
    3.1.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#314content-md5" title="3.1.4、Content-MD5计算规则" class="md-nav__link">
    3.1.4、Content-MD5计算规则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#315" title="3.1.5、示例" class="md-nav__link">
    3.1.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32head-object" title="3.2、HEAD Object" class="md-nav__link">
    3.2、HEAD Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321" title="3.2.1、请求语法" class="md-nav__link">
    3.2.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" title="3.2.2、细节分析" class="md-nav__link">
    3.2.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" title="3.2.3、示例" class="md-nav__link">
    3.2.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33get-object" title="3.3、GET Object" class="md-nav__link">
    3.3、GET Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331" title="3.3.1、请求语法" class="md-nav__link">
    3.3.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332header" title="3.3.2、请求Header" class="md-nav__link">
    3.3.2、请求Header
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333" title="3.3.3、细节分析" class="md-nav__link">
    3.3.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#334" title="3.3.4、示例" class="md-nav__link">
    3.3.4、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34delete-object" title="3.4、DELETE Object" class="md-nav__link">
    3.4、DELETE Object
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341" title="3.4.1、请求语法" class="md-nav__link">
    3.4.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342" title="3.4.2、细节分析" class="md-nav__link">
    3.4.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343" title="3.4.3、示例" class="md-nav__link">
    3.4.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35copy-object" title="3.5、Copy Object" class="md-nav__link">
    3.5、Copy Object
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4multipart-upload" title="4、关于Multipart Upload的操作" class="md-nav__link">
    4、关于Multipart Upload的操作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41initiate-multipart-upload" title="4.1、Initiate Multipart Upload" class="md-nav__link">
    4.1、Initiate Multipart Upload
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411" title="4.1.1、请求语法" class="md-nav__link">
    4.1.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412response-elements" title="4.1.2、响应元素(Response Elements)" class="md-nav__link">
    4.1.2、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#413" title="4.1.3、细节分析" class="md-nav__link">
    4.1.3、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#414" title="4.1.4、示例" class="md-nav__link">
    4.1.4、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42upload-part" title="4.2、Upload Part" class="md-nav__link">
    4.2、Upload Part
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421" title="4.2.1、请求语法" class="md-nav__link">
    4.2.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422" title="4.2.2、细节分析" class="md-nav__link">
    4.2.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423" title="4.2.3、示例" class="md-nav__link">
    4.2.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43complete-multipart-upload" title="4.3、Complete Multipart Upload" class="md-nav__link">
    4.3、Complete Multipart Upload
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431" title="4.3.1、请求语法" class="md-nav__link">
    4.3.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432request-parameters" title="4.3.2、请求参数(Request Parameters)" class="md-nav__link">
    4.3.2、请求参数(Request Parameters)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433request-elements" title="4.3.3、请求元素(Request Elements)" class="md-nav__link">
    4.3.3、请求元素(Request Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434response-elements" title="4.3.4、响应元素(Response Elements)" class="md-nav__link">
    4.3.4、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#435" title="4.3.5、细节分析" class="md-nav__link">
    4.3.5、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#436" title="4.3.6、示例" class="md-nav__link">
    4.3.6、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44abort-multipart-upload" title="4.4、Abort Multipart Upload" class="md-nav__link">
    4.4、Abort Multipart Upload
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441" title="4.4.1、请求语法" class="md-nav__link">
    4.4.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#442" title="4.4.2、细节分析" class="md-nav__link">
    4.4.2、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#443" title="4.4.3、示例" class="md-nav__link">
    4.4.3、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45list-parts" title="4.5、List Parts" class="md-nav__link">
    4.5、List Parts
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#451" title="4.5.1、请求语法" class="md-nav__link">
    4.5.1、请求语法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#452request-parameters" title="4.5.2、请求参数(Request Parameters)" class="md-nav__link">
    4.5.2、请求参数(Request Parameters)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#453response-elements" title="4.5.3、响应元素(Response Elements)" class="md-nav__link">
    4.5.3、响应元素(Response Elements)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#454" title="4.5.4、细节分析" class="md-nav__link">
    4.5.4、细节分析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#455" title="4.5.5、示例" class="md-nav__link">
    4.5.5、示例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="dstor">Dstor数据访问接口定义<a class="headerlink" href="#dstor" title="Permanent link">&para;</a></h1>
<h2 id="toc">TOC<a class="headerlink" href="#toc" title="Permanent link">&para;</a></h2>
<p><a href="#一支持的操作列表">一、支持的操作列表</a><br />
<a href="#二公共请求头部">二、公共请求头部</a><br />
<a href="#三公共响应状态码">三、公共响应状态码</a><br />
<a href="#四接口详细说明">四、接口详细说明</a><br />
&emsp;&emsp;<a href="#1关于Service的操作">1、关于Service的操作</a><br />
&emsp;&emsp;<a href="#2关于bucket的操作">2、关于bucket的操作</a> <br />
&emsp;&emsp;&emsp;&emsp;<a href="#21put-bucket">2.1、PUT Bucket</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#22delete-bucket">2.2、DELETE Bucket</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#23head-bucket">2.3、HEAD Bucket</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#24get-bucketlist-object">2.4、GET Bucket(List Object)</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#25put-bucket-lifecycle">2.5、PUT Bucket Lifecycle</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#26get-bucket-lifecycle">2.6、GET Bucket Lifecycle</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#27delete-bucket-lifecycle">2.7、DELETE Bucket Lifecycle</a><br />
&emsp;&emsp;<a href="#3关于object的操作">3、关于object的操作</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#31put-object">3.1、PUT Object</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#32head-object">3.2、HEAD Object</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#33get-object">3.3、GET Object</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#34delete-object">3.4、DELETE Object</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#35copy-object">3.5、COPY Object</a><br />
&emsp;&emsp;<a href="#4关于multipart-upload的操作">4、关于Multipart Upload的操作</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#41initiate-multipart-upload">4.1、Initiate Multipart Upload</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#42upload-part">4.2、Upload Part</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#43complete-multipart-upload">4.3、Complete Multipart Upload</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#44abort-multipart-upload">4.4、Abort Multipart Upload</a><br />
&emsp;&emsp;&emsp;&emsp;<a href="#45list-parts">4.5、List Parts</a>  </p>
<h2 id="_1">一、支持的操作列表<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th><strong>接口名称</strong></th>
<th><strong>接口说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>GET Service（List Bucket）</td>
<td>列出一个用户下所有的bucket</td>
</tr>
<tr>
<td>PUT Bucket</td>
<td>创建bucket，只能是字母，数字，下划线组合的字符串</td>
</tr>
<tr>
<td>DELETE Bucket</td>
<td>删除bucket，若bucket非空，需先删掉下面所有文件</td>
</tr>
<tr>
<td>Head Bucket</td>
<td>获取bucket信息，也称作GET Bucket Info</td>
</tr>
<tr>
<td>Get Bucket (List Object)</td>
<td>列出一个用户下的对象，接口也称作GET Bucket</td>
</tr>
<tr>
<td>PUT Bucket Lifecycle</td>
<td>设置或替换一个bucket下的对象生命周期规则</td>
</tr>
<tr>
<td>GET Bucket Lifecycle</td>
<td>获取一个bucket下的对象生命周期规则</td>
</tr>
<tr>
<td>DELETE Bucket Lifecycle</td>
<td>删除一个bucket下的对象生命周期规则</td>
</tr>
<tr>
<td>PUT Object</td>
<td>上传一个对象，对象名字符串支持utf8和gbk编码</td>
</tr>
<tr>
<td>Head Object</td>
<td>获取对象信息，接口也称作Get Object Info</td>
</tr>
<tr>
<td>GET Object</td>
<td>获取一个对象，对象名字符串支持utf8和gbk编码</td>
</tr>
<tr>
<td>DELETE Object</td>
<td>删除一个对象</td>
</tr>
<tr>
<td>Copy Object</td>
<td>拷贝一个对象，不能保证原子性</td>
</tr>
<tr>
<td>Initiate Multipart Upload</td>
<td>初始化一个Multipart Upload事件。该接口会返回一个Dstor创建的全局唯一的Upload ID</td>
</tr>
<tr>
<td>Upload Part</td>
<td>根据指定的Object名和Upload ID来分块（Part）上传数据</td>
</tr>
<tr>
<td>Complete Multipart Upload</td>
<td>在将所有数据Part都上传完成后，必须调用此接口来完成整个文件的Multipart   Upload</td>
</tr>
<tr>
<td>Abort Multipart Upload</td>
<td>根据用户提供的Upload ID中止其对应的Multipart   Upload事件</td>
</tr>
<tr>
<td>List Parts</td>
<td>罗列出指定Upload ID所属的所有已经上传成功Part</td>
</tr>
<tr>
<td>GET_BUCKET_ACL</td>
<td>这些接口实际未实现，仅为适配s3测试和客户端返回默认值</td>
</tr>
<tr>
<td>GET_BUCKET_OBJECT_VERSIONS</td>
<td></td>
</tr>
<tr>
<td>GET_BUCKET_LOCATION</td>
<td></td>
</tr>
<tr>
<td>GET_BUCKET_VERSIONING</td>
<td></td>
</tr>
<tr>
<td>GET_OBJECT_ACL</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="_2">二、公共请求头部<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th><strong>Request Header</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>CONTENT_LENGTH</td>
<td>Length of the request body.</td>
</tr>
<tr>
<td>DATE</td>
<td>Request time and date (in UTC).</td>
</tr>
<tr>
<td>HOST</td>
<td>The name of the host server.</td>
</tr>
<tr>
<td>AUTHORIZATION</td>
<td>Authorization token.</td>
</tr>
</tbody>
</table>
<h2 id="_3">三、公共响应状态码<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th><strong>HTTP Status</strong></th>
<th><strong>Response Code</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>Continue</td>
</tr>
<tr>
<td>200</td>
<td>Success</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
</tr>
<tr>
<td>202</td>
<td>Accepted</td>
</tr>
<tr>
<td>204</td>
<td>NoContent</td>
</tr>
<tr>
<td>206</td>
<td>Partial content</td>
</tr>
<tr>
<td>304</td>
<td>NotModified</td>
</tr>
<tr>
<td>400</td>
<td>InvalidArgument</td>
</tr>
<tr>
<td>400</td>
<td>InvalidDigest</td>
</tr>
<tr>
<td>400</td>
<td>BadDigest</td>
</tr>
<tr>
<td>400</td>
<td>InvalidBucketName</td>
</tr>
<tr>
<td>400</td>
<td>InvalidObjectName</td>
</tr>
<tr>
<td>400</td>
<td>UnresolvableGrantByEmailAddress</td>
</tr>
<tr>
<td>400</td>
<td>InvalidPart</td>
</tr>
<tr>
<td>400</td>
<td>InvalidPartOrder</td>
</tr>
<tr>
<td>400</td>
<td>RequestTimeout</td>
</tr>
<tr>
<td>400</td>
<td>EntityTooLarge</td>
</tr>
<tr>
<td>403</td>
<td>AccessDenied</td>
</tr>
<tr>
<td>403</td>
<td>UserSuspended</td>
</tr>
<tr>
<td>403</td>
<td>RequestTimeTooSkewed</td>
</tr>
<tr>
<td>404</td>
<td>NoSuchKey</td>
</tr>
<tr>
<td>404</td>
<td>NoSuchBucket</td>
</tr>
<tr>
<td>404</td>
<td>NoSuchUpload</td>
</tr>
<tr>
<td>405</td>
<td>MethodNotAllowed</td>
</tr>
<tr>
<td>408</td>
<td>RequestTimeout</td>
</tr>
<tr>
<td>409</td>
<td>BucketAlreadyExists</td>
</tr>
<tr>
<td>409</td>
<td>BucketNotEmpty</td>
</tr>
<tr>
<td>411</td>
<td>MissingContentLength</td>
</tr>
<tr>
<td>412</td>
<td>PreconditionFailed</td>
</tr>
<tr>
<td>416</td>
<td>InvalidRange</td>
</tr>
<tr>
<td>422</td>
<td>UnprocessableEntity</td>
</tr>
<tr>
<td>500</td>
<td>InternalError</td>
</tr>
</tbody>
</table>
<h2 id="_4">四、接口详细说明<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="1service">1、关于Service的操作<a class="headerlink" href="#1service" title="Permanent link">&para;</a></h3>
<h4 id="11get-service">1.1、GET Service<a class="headerlink" href="#11get-service" title="Permanent link">&para;</a></h4>
<p>对于服务地址作Get请求可以返回请求者拥有的Bucket列表，其中“/”表示根目录。</p>
<h5 id="111">1.1.1、请求语法<a class="headerlink" href="#111" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="112">1.1.2、请求参数<a class="headerlink" href="#112" title="Permanent link">&para;</a></h5>
<p>无</p>
<h5 id="113response-elements">1.1.3、响应元素(Response Elements)<a class="headerlink" href="#113response-elements" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ListAllMyBucketsResult</td>
<td>保存Get Service请求结果的容器。   类型：容器   子节点: Owner, Buckets   父节点：None</td>
</tr>
<tr>
<td>Owner</td>
<td>用于存放Bucket拥有者信息的容器。   类型：容器   父节点：ListAllMyBucketsResult</td>
</tr>
<tr>
<td>ID</td>
<td>Bucket拥有者的用户ID。   类型：字符串   父节点：ListAllMyBucketsResult.Owner</td>
</tr>
<tr>
<td>DisplayName</td>
<td>Bucket拥有者的名称 (目前和ID一致)。    类型：字符串    父节点：ListAllMyBucketsResult.Owner</td>
</tr>
<tr>
<td>Buckets</td>
<td>保存多个Bucket信息的容器。    类型：容器     子节点：Bucket    父节点：ListAllMyBucketsResult</td>
</tr>
<tr>
<td>Bucket</td>
<td>保存bucket信息的容器.     类型：容器    子节点：Name, CreationDate, Location    父节点：ListAllMyBucketsResult.Buckets</td>
</tr>
<tr>
<td>Name</td>
<td>Bucket名称。    类型：字符串    父节点：ListAllMyBucketsResult.Buckets.Bucket</td>
</tr>
<tr>
<td>CreateDate</td>
<td>Bucket创建时间    类型：时间 (格式：yyyy-mm-ddThh:mm:ss.timezone,   e.g., 2011-12-01T12:27:13.000Z)    父节点：ListAllMyBucketsResult.Buckets.Bucket</td>
</tr>
</tbody>
</table>
<h5 id="114">1.1.4、细节分析<a class="headerlink" href="#114" title="Permanent link">&para;</a></h5>
<ul>
<li>GetService这个API只对验证通过的用户有效。</li>
<li>如果请求中没有用户验证信息（即匿名访问），返回403 Forbidden。错误码：AccessDenied。</li>
<li>当所有的bucket都返回时，返回的xml中不包含Prefix、Marker、MaxKeys、IsTruncated、NextMarker节点，如果还有部分结果未返回，则增加上述节点，其中NextMarker用于继续查询时给marker赋值。</li>
</ul>
<h5 id="115">1.1.5、示例<a class="headerlink" href="#115" title="Permanent link">&para;</a></h5>
<p><strong>请求示例Ⅰ</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Thu, 15 Mar 2017 11:18:32 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS nxj7dtl1c24jwhcyl5hpvnhi:COS3OQkfQPnKmYZTEHYv2qUl5jI=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例Ⅰ</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
Date: Thu, 15 Mar 2017 11:18:32 GMT
Content-Type: application/xml
Content-Length: 556
Connection: keep-alive
x-amz-request-id: tx00000000000000000027b-0057835f2e-107c-default

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ListAllMyBucketsResult&gt;</span>
  <span class="nt">&lt;Owner&gt;</span>
    <span class="nt">&lt;ID&gt;</span>12345<span class="nt">&lt;/ID&gt;</span>
    <span class="nt">&lt;DisplayName&gt;</span>dnionstore<span class="nt">&lt;/DisplayName&gt;</span>
  <span class="nt">&lt;/Owner&gt;</span>
  <span class="nt">&lt;Buckets&gt;</span>
    <span class="nt">&lt;Bucket&gt;</span>
      <span class="nt">&lt;CreationDate&gt;</span>2016-12-17T18:12:43.000Z<span class="nt">&lt;/CreationDate&gt;</span>
      <span class="nt">&lt;Name&gt;</span>test-bucket1<span class="nt">&lt;/Name&gt;</span>
    <span class="nt">&lt;/Bucket&gt;</span>
    <span class="nt">&lt;Bucket&gt;</span>
      <span class="nt">&lt;CreationDate&gt;</span>2016-12-25T11:21:04.000Z<span class="nt">&lt;/CreationDate&gt;</span>
      <span class="nt">&lt;Name&gt;</span>test-bucket2<span class="nt">&lt;/Name&gt;</span>
   <span class="nt">&lt;/Bucket&gt;</span>
 <span class="nt">&lt;/Buckets&gt;</span>
<span class="nt">&lt;/ListAllMyBucketsResult&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>请求示例Ⅱ</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/?prefix=xz02tphky6fjfiuc&amp;max-keys=1</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Thu, 15 Mar 2017 11:18:32 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS nxj7dtl1c24jwhcyl5hpvnhi:COS3OQkfQPnKmYZTEHYv2qUl5jI=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例Ⅱ</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
Date: Thu, 15 Mar 2017 11:18:32 GMT
Content-Type: application/xml
Content-Length: 545
Connection: keep-alive
x-amz-request-id: tx00000000000000000027b-0057835f2e-107d-default

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ListAllMyBucketsResult&gt;</span>
  <span class="nt">&lt;Prefix&gt;</span>xz02tphky6fjfiuc<span class="nt">&lt;/Prefix&gt;</span>
  <span class="nt">&lt;Marker&gt;&lt;/Marker&gt;</span>
  <span class="nt">&lt;MaxKeys&gt;</span>1<span class="nt">&lt;/MaxKeys&gt;</span>
  <span class="nt">&lt;IsTruncated&gt;</span>true<span class="nt">&lt;/IsTruncated&gt;</span>
  <span class="nt">&lt;NextMarker&gt;</span>xz02tphky6fjfiuc0<span class="nt">&lt;/NextMarker&gt;</span>
  <span class="nt">&lt;Owner&gt;</span>
    <span class="nt">&lt;ID&gt;</span>12345<span class="nt">&lt;/ID&gt;</span>
    <span class="nt">&lt;DisplayName&gt;</span>dnionstore<span class="nt">&lt;/DisplayName&gt;</span>
  <span class="nt">&lt;/Owner&gt;</span>
  <span class="nt">&lt;Buckets&gt;</span>
    <span class="nt">&lt;Bucket&gt;</span>
      <span class="nt">&lt;CreationDate&gt;</span>2016-05-15T11:18:32.000Z<span class="nt">&lt;/CreationDate&gt;</span>
      <span class="nt">&lt;Name&gt;</span>test-bucket1<span class="nt">&lt;/Name&gt;</span>
    <span class="nt">&lt;/Bucket&gt;</span>
  <span class="nt">&lt;/Buckets&gt;</span>
<span class="nt">&lt;/ListAllMyBucketsResult&gt;</span>
</pre></div>
</td></tr></table>

<h3 id="2bucket">2、关于bucket的操作<a class="headerlink" href="#2bucket" title="Permanent link">&para;</a></h3>
<h4 id="21put-bucket">2.1、PUT Bucket<a class="headerlink" href="#21put-bucket" title="Permanent link">&para;</a></h4>
<p>PUT Bucket用于创建Bucket（不支持匿名访问）。</p>
<h5 id="211">2.1.1、请求语法<a class="headerlink" href="#211" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/BucketName/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="212">2.1.2、细节分析<a class="headerlink" href="#212" title="Permanent link">&para;</a></h5>
<ul>
<li>如果请求的Bucket已经存在，并且请求者是所有者，返回200 OK成功。</li>
<li>如果想创建的Bucket不符合命名规范，返回400 Bad Request消息。错误码：InvalidBucketName。</li>
<li>如果用户发起PUT Bucket请求的时候，没有传入用户验证信息，返回403 Forbidden消息。错误码：AccessDenied。</li>
<li>如果PutBucket的时候发现已经超过bucket最大创建数时，默认1000个，返回400 Bad Request消息。错误码：TooManyBuckets。</li>
<li>创建的Bucket，可以指定Bucket的存储类型，可选值为Standard。</li>
</ul>
<h5 id="213">2.1.3、示例<a class="headerlink" href="#213" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/test-bucket/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 03:15:40 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:77Dvh5wQgIjWjwO/KyRt8dOPfo8=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
x-amz-request-id: tx00000000000000000027b-0057835f2e-107b-default
Date: Fri, 24 Feb 2017 03:15:40 GMT
Content-Length: 0
Connection: keep-alive
</pre></div>
</td></tr></table>

<h4 id="22delete-bucket">2.2、DELETE Bucket<a class="headerlink" href="#22delete-bucket" title="Permanent link">&para;</a></h4>
<p>Delete Bucket用于删除某个Bucket。</p>
<h5 id="221">2.2.1、请求语法<a class="headerlink" href="#221" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/BucketName/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="222">2.2.2、细节分析<a class="headerlink" href="#222" title="Permanent link">&para;</a></h5>
<ul>
<li>如果Bucket不存在，返回404 no content错误。错误码：NoSuchBucket。</li>
<li>为了防止误删除的发生，Dstor不允许用户删除一个非空的Bucket。</li>
<li>如果试图删除一个不为空的Bucket，返回409 Conflict错误，错误码：BucketNotEmpty。</li>
<li>只有Bucket的拥有者才能删除这个Bucket。如果试图删除一个没有对应权限的Bucket，返回403 Forbidden错误。错误码：AccessDenied。</li>
</ul>
<h5 id="223">2.2.3、示例<a class="headerlink" href="#223" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/test-bucket/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com  </span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 05:31:04 GMT  </span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:ceOEyZavKY4QcjoUWYSpYbJ3naA=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 204 No Content 
x-amz-request-id: 534B371674E88A4D8906008B
Date: Fri, 24 Feb 2017 05:31:04 GMT
Connection: keep-alive
Content-Length: 0  
</pre></div>
</td></tr></table>

<h4 id="23head-bucket">2.3、HEAD Bucket<a class="headerlink" href="#23head-bucket" title="Permanent link">&para;</a></h4>
<p>HEAD Bucket操作用于确认bucket是否存在以及客户端是否具有该bucket的访问权限。</p>
<h5 id="231">2.3.1、请求语法<a class="headerlink" href="#231" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">HEAD</span> <span class="nn">/BucketName/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="232">2.3.2、细节分析<a class="headerlink" href="#232" title="Permanent link">&para;</a></h5>
<ul>
<li>如果Bucket不存在，返回404错误。错误码：NoSuchBucket。</li>
<li>只有Bucket的拥有者才能查看Bucket的信息，否则返回403 Forbidden错误,错误码：AccessDenied。</li>
</ul>
<h5 id="233">2.3.3、示例<a class="headerlink" href="#233" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">HEAD</span> <span class="nn">/BucketName/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com  </span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Sat, 12 Sep 2015 07:51:28 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc: BuG4rRK+zNhH1AcF51NNHD39zXw=</span>
</pre></div>
</td></tr></table>

<p><strong>成功获取Bucket信息的返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200
x-amz-request-id: 534B371674E88A4D8906008B
Date: Sat, 12 Sep 2015 07:51:28 GMT
Connection: keep-alive
Content-Length: 0
</pre></div>
</td></tr></table>

<h4 id="24get-bucketlist-object">2.4、Get Bucket(List Object)<a class="headerlink" href="#24get-bucketlist-object" title="Permanent link">&para;</a></h4>
<p>Get Bucket操作可用来list Bucket中所有Object的信息。</p>
<h5 id="241">2.4.1、请求语法<a class="headerlink" href="#241" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/bucketname/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="242">2.4.2、请求参数<a class="headerlink" href="#242" title="Permanent link">&para;</a></h5>
<p>GetBucket（ListObject）时，可以通过prefix，marker，delimiter和max-keys对list做限定，返回部分结果。</p>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>delimiter</td>
<td>是一个用于对Object名字进行分组的字符。所有名字包含指定的前缀且第一次出现delimiter字符之间的object作为公共前缀—CommonPrefixes。   数据类型：字符串   默认值：无</td>
</tr>
<tr>
<td>marker</td>
<td>设定结果从marker之后按字母排序的第一个开始返回。   数据类型：字符串   默认值：无</td>
</tr>
<tr>
<td>max-keys</td>
<td>限定此次返回object的最大数，如果不设定，默认为100，max-keys取值不能大于1000。   数据类型：字符串   默认值：100</td>
</tr>
<tr>
<td>prefix</td>
<td>限定返回的object key必须以prefix作为前缀。注意使用prefix查询时，返回的key中仍会包含prefix。   数据类型：字符串   默认值：无</td>
</tr>
</tbody>
</table>
<h5 id="243response-elements">2.4.3、响应元素(Response Elements)<a class="headerlink" href="#243response-elements" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Contents</td>
<td>保存每个返回Object meta的容器。   类型：容器   父节点：ListBucketResult</td>
</tr>
<tr>
<td>CommonPrefixes</td>
<td>如果请求中指定了delimiter参数，则在Dstor返回的响应中包含CommonPrefixes元素。该元素标明那些以delimiter结尾，并有共同前缀的object名称的集合。   类型：字符串   父节点：ListBucketResult</td>
</tr>
<tr>
<td>Delimiter</td>
<td>是一个用于对Object名字进行分组的字符。所有名字包含指定的前缀且第一次出现delimiter字符之间的object作为一组元素——CommonPrefixes，目前只支持斜杠”/”。   类型：字符串   父节点：ListBucketResult</td>
</tr>
<tr>
<td>DisplayName</td>
<td>Object 拥有者的名字。   类型：字符串   父节点：ListBucketResult.Contents.Owner</td>
</tr>
<tr>
<td>ETag</td>
<td>ETag (entity tag) 在每个Object生成的时候被创建，用于标示一个Object的内容。对于Put Object请求创建的Object，ETag值是其内容的MD5值；对于其他方式创建的Object，ETag值是其内容的UUID。ETag值可以用于检查Object内容是否发生变化。不建议用户使用ETag来作为Object内容的MD5校验数据完整性。   类型：字符串   父节点：ListBucketResult.Contents</td>
</tr>
<tr>
<td>ID</td>
<td>Bucket拥有者的用户ID。   类型：字符串   父节点：ListBucketResult.Contents.Owner</td>
</tr>
<tr>
<td>IsTruncated</td>
<td>指明是否所有的结果都已经返回； “true”表示本次没有返回全部结果；“false”表示本次已经返回了全部结果。   类型：枚举字符串   有效值：true、false   父节点：ListBucketResult</td>
</tr>
<tr>
<td>Key</td>
<td>Object的Key.   类型：字符串   父节点：ListBucketResult.Contents</td>
</tr>
<tr>
<td>LastModified</td>
<td>Object最后被修改的时间。   类型：时间   父节点：ListBucketResult.Contents</td>
</tr>
<tr>
<td>ListBucketResult</td>
<td>保存Get Bucket请求结果的容器.   类型：容器   子节点：Name, Prefix, Marker, MaxKeys, Delimiter, IsTruncated,   Nextmarker, Contents   父节点：None</td>
</tr>
<tr>
<td>Marker</td>
<td>标明这次Get Bucket（List Object）的起点。   类型：字符串   父节点：ListBucketResult</td>
</tr>
<tr>
<td>MaxKeys</td>
<td>响应请求内返回结果的最大数目。   类型：字符串   父节点：ListBucketResult</td>
</tr>
<tr>
<td>Name</td>
<td>Bucket名字   类型：字符串   父节点：ListBucketResult</td>
</tr>
<tr>
<td>Owner</td>
<td>保存Bucket拥有者信息的容器。   类型：容器   子节点：DisplayName, ID   父节点：ListBucketResult</td>
</tr>
<tr>
<td>Prefix</td>
<td>本次查询结果的开始前缀。   类型：字符串   父节点：ListBucketResult</td>
</tr>
<tr>
<td>Size</td>
<td>Object的字节数。   类型：字符串   父节点：ListBucketResult.Contents</td>
</tr>
<tr>
<td>StorageClass</td>
<td>Object的存储类型，支持“Standard”、“IA”、“Archive”。（目前只有部分区域支持“Archive”类型）   类型：字符串   父节点：ListBucketResult.Contents</td>
</tr>
</tbody>
</table>
<h5 id="244">2.4.4、细节分析<a class="headerlink" href="#244" title="Permanent link">&para;</a></h5>
<ul>
<li>如果访问的Bucket不存在，包括试图访问因为命名不规范无法创建的Bucket，返回404 Not Found错误，错误码：NoSuchBucket。</li>
<li>如果没有访问该Bucket的权限，返回403 Forbidden错误，错误码：AccessDenied。</li>
<li>如果因为max-keys的设定无法一次完成listing，返回结果会附加一个<NextMarker>，提示继续listing可以以此为marker。NextMarker中的值仍在list结果之中。</li>
<li>在做条件查询时，即使marker实际在列表中不存在，返回也从符合marker字母排序的下一个开始打印。如果max-keys小于0或者大于1000，将返回400 Bad Request错误。错误码：InvalidArgument。</li>
<li>若prefix，marker，delimiter参数不符合长度要求，返回400 Bad Request。错误码：InvalidArgument。</li>
<li>prefix，marker用来实现分页显示效果，参数的长度必须小于1024字节。</li>
<li>如果把prefix设为某个文件夹名，就可以罗列以此prefix开头的文件，即该文件夹下递归的所有的文件和子文件夹。如果再把delimiter设置为 / 时，返回值就只罗列该文件夹下的文件，该文件夹下的子文件名返回在CommonPrefixes部分，子文件夹下递归的文件和文件夹不被显示。如一个bucket存在三个object :fun/test.jpg， fun/movie/001.avi， fun/movie/007.avi。若设定prefix为”fun/” ，则返回三个object；如果增加设定delimiter为“/”，则返回文件”fun/test.jpg”和前缀”fun/movie/”；即实现了文件夹的逻辑。</li>
</ul>
<h5 id="245">2.4.5、示例<a class="headerlink" href="#245" title="Permanent link">&para;</a></h5>
<p>在bucket“test-bucket”内有4个object，名字分别为：</p>
<p>  test1.jpg</p>
<p>  fun/test2.jpg</p>
<p>  fun/movie/001.avi</p>
<p>  fun/movie/007.avi</p>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/bucketname/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 08:43:27 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS 96786O1TF69Z0YB4I7O1:uI0ll22EgdycsVhCbFBxpHdHeOE=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
x-awz-request-id: 534B371674E88A4D8906008B
Date: Fri, 24 Feb 2012 08:43:27 GMT
Content-Type: application/xml
Content-Length: 1866
Connection: keep-alive
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ListBucketResult</span> <span class="na">xmlns=</span><span class="s">&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;Name&gt;</span>bucketname<span class="nt">&lt;/Name&gt;</span>
<span class="nt">&lt;Prefix&gt;&lt;/Prefix&gt;</span>
<span class="nt">&lt;Marker&gt;&lt;/Marker&gt;</span>
<span class="nt">&lt;MaxKeys&gt;</span>100<span class="nt">&lt;/MaxKeys&gt;</span>
<span class="nt">&lt;Delimiter&gt;&lt;/Delimiter&gt;</span>
    <span class="nt">&lt;IsTruncated&gt;</span>false<span class="nt">&lt;/IsTruncated&gt;</span>
    <span class="nt">&lt;Contents&gt;</span>
        <span class="nt">&lt;Key&gt;</span>fun/movie/001.avi<span class="nt">&lt;/Key&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-24T08:43:07.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>5B3C1A2E053D763E1B002CC607C5A0FE<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Type&gt;</span>Normal<span class="nt">&lt;/Type&gt;</span>
        <span class="nt">&lt;Size&gt;</span>344606<span class="nt">&lt;/Size&gt;</span>
        <span class="nt">&lt;StorageClass&gt;</span>Standard<span class="nt">&lt;/StorageClass&gt;</span>
        <span class="nt">&lt;Owner&gt;</span>
            <span class="nt">&lt;ID&gt;</span>new_user7<span class="nt">&lt;/ID&gt;</span>
            <span class="nt">&lt;DisplayName&gt;</span>new_user7<span class="nt">&lt;/DisplayName&gt;</span>
        <span class="nt">&lt;/Owner&gt;</span>
    <span class="nt">&lt;/Contents&gt;</span>
    <span class="nt">&lt;Contents&gt;</span>
        <span class="nt">&lt;Key&gt;</span>fun/movie/007.avi<span class="nt">&lt;/Key&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-24T08:43:27.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>5B3C1A2E053D763E1B002CC607C5A0FE<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Type&gt;</span>Normal<span class="nt">&lt;/Type&gt;</span>
        <span class="nt">&lt;Size&gt;</span>344606<span class="nt">&lt;/Size&gt;</span>
        <span class="nt">&lt;StorageClass&gt;</span>Standard<span class="nt">&lt;/StorageClass&gt;</span>
        <span class="nt">&lt;Owner&gt;</span>
            <span class="nt">&lt;ID&gt;</span>new_user7<span class="nt">&lt;/ID&gt;</span>
            <span class="nt">&lt;DisplayName&gt;</span>new_user7<span class="nt">&lt;/DisplayName&gt;</span>
        <span class="nt">&lt;/Owner&gt;</span>
    <span class="nt">&lt;/Contents&gt;</span>
<span class="nt">&lt;Contents&gt;</span>
        <span class="nt">&lt;Key&gt;</span>fun/test2.jpg<span class="nt">&lt;/Key&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-24T08:42:32.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>5B3C1A2E053D763E1B002CC607C5A0FE<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Type&gt;</span>Normal<span class="nt">&lt;/Type&gt;</span>
        <span class="nt">&lt;Size&gt;</span>344606<span class="nt">&lt;/Size&gt;</span>
        <span class="nt">&lt;StorageClass&gt;</span>Standard<span class="nt">&lt;/StorageClass&gt;</span>
        <span class="nt">&lt;Owner&gt;</span>
            <span class="nt">&lt;ID&gt;</span>new_user7<span class="nt">&lt;/ID&gt;</span>
            <span class="nt">&lt;DisplayName&gt;</span>new_user7<span class="nt">&lt;/DisplayName&gt;</span>
        <span class="nt">&lt;/Owner&gt;</span>
    <span class="nt">&lt;/Contents&gt;</span>
    <span class="nt">&lt;Contents&gt;</span>
        <span class="nt">&lt;Key&gt;</span> test1.jpg<span class="nt">&lt;/Key&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-24T06:07:48.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>5B3C1A2E053D763E1B002CC607C5A0FE<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Type&gt;</span>Normal<span class="nt">&lt;/Type&gt;</span>
        <span class="nt">&lt;Size&gt;</span>344606<span class="nt">&lt;/Size&gt;</span>
        <span class="nt">&lt;StorageClass&gt;</span>Standard<span class="nt">&lt;/StorageClass&gt;</span>
        <span class="nt">&lt;Owner&gt;</span>
            <span class="nt">&lt;ID&gt;</span>new_user7<span class="nt">&lt;/ID&gt;</span>
            <span class="nt">&lt;DisplayName&gt;</span>new_user7<span class="nt">&lt;/DisplayName&gt;</span>
        <span class="nt">&lt;/Owner&gt;</span>
    <span class="nt">&lt;/Contents&gt;</span>
<span class="nt">&lt;/ListBucketResult&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>请求示例(含prefix和delimiter参数)：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/bucketname/?prefix=fun/&amp;delimiter=/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2012 08:43:27 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:DNrnx7xHk3sgysx7I8U9I9IY1vY=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
x-awz-request-id: 534B371674E88A4D8906008B
Date: Fri, 24 Feb 2012 08:43:27 GMT
Content-Type: application/xml
Content-Length: 712
Connection: keep-alive
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ListBucketResult</span> <span class="na">xmlns=</span><span class="s">&quot;http://s3.amazonaws.com/doc/2006-03-01/”</span><span class="nt">&gt;</span>
<span class="nt">&lt;Name&gt;</span>bucketname<span class="nt">&lt;/Name&gt;</span>
<span class="nt">&lt;Prefix&gt;</span>fun/<span class="nt">&lt;/Prefix&gt;</span>
<span class="nt">&lt;Marker&gt;&lt;/Marker&gt;</span>
<span class="nt">&lt;MaxKeys&gt;</span>100<span class="nt">&lt;/MaxKeys&gt;</span>
<span class="nt">&lt;Delimiter&gt;</span>/<span class="nt">&lt;/Delimiter&gt;</span>
    <span class="nt">&lt;IsTruncated&gt;</span>false<span class="nt">&lt;/IsTruncated&gt;</span>
    <span class="nt">&lt;Contents&gt;</span>
        <span class="nt">&lt;Key&gt;</span>fun/test2.jpg<span class="nt">&lt;/Key&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-24T08:42:32.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>5B3C1A2E053D763E1B002CC607C5A0FE<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Type&gt;</span>Normal<span class="nt">&lt;/Type&gt;</span>
        <span class="nt">&lt;Size&gt;</span>344606<span class="nt">&lt;/Size&gt;</span>
        <span class="nt">&lt;StorageClass&gt;</span>Standard<span class="nt">&lt;/StorageClass&gt;</span>
        <span class="nt">&lt;Owner&gt;</span>
            <span class="nt">&lt;ID&gt;</span>new_user7<span class="nt">&lt;/ID&gt;</span>
            <span class="nt">&lt;DisplayName&gt;</span>new_user7<span class="nt">&lt;/DisplayName&gt;</span>
        <span class="nt">&lt;/Owner&gt;</span>
    <span class="nt">&lt;/Contents&gt;</span>
   <span class="nt">&lt;CommonPrefixes&gt;</span>
        <span class="nt">&lt;Prefix&gt;</span>fun/movie/<span class="nt">&lt;/Prefix&gt;</span>
   <span class="nt">&lt;/CommonPrefixes&gt;</span>
<span class="nt">&lt;/ListBucketResult&gt;</span>   
</pre></div>
</td></tr></table>

<h4 id="25put-bucket-lifecycle">2.5、Put Bucket Lifecycle<a class="headerlink" href="#25put-bucket-lifecycle" title="Permanent link">&para;</a></h4>
<p>Bucket的拥有者可以通过Put Bucket Lifecycle来设置Bucket的Lifecycle配置。Lifecycle开启后，Dstor将按照配置，定期自动删除或转储与Lifecycle规则相匹配的Object。</p>
<h5 id="251">2.5.1、请求语法<a class="headerlink" href="#251" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/bucketname/?lifecycle</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="err">Content-Length：ContentLength</span>
Content-Type: application/xml
Authorization: AWS AccessKeyId:SignatureValue 
Host: api.dstor.dnion.com
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;LifecycleConfiguration&gt;
  &lt;Rule&gt;
    &lt;ID&gt;RuleID&lt;/ID&gt;
    &lt;Prefix&gt;Prefix&lt;/Prefix&gt;
    &lt;Status&gt;Status&lt;/Status&gt;
    &lt;Expiration&gt;
      &lt;Days&gt;Days&lt;/Days&gt;
    &lt;/Expiration&gt;
  &lt;/Rule&gt;
&lt;/LifecycleConfiguration&gt;
</pre></div>
</td></tr></table>

<h5 id="252request-elements">2.5.2、请求元素(Request Elements)<a class="headerlink" href="#252request-elements" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Days</td>
<td>指定规则在对象最后修改时间过后多少天生效。    类型：正整数    父节点：Expiration</td>
</tr>
<tr>
<td>Expiration</td>
<td>指定Object规则的过期属性。    类型：容器    子节点：Days或CreatedBeforeDate    父节点：Rule</td>
</tr>
<tr>
<td>ID</td>
<td>规则唯一的ID。最多由255字节组成。当用户没有指定，或者该值为空时，Dstor会为用户生成一个唯一值。    类型：字符串    子节点：无    父节点：Rule</td>
</tr>
<tr>
<td>LifecycleConfiguration</td>
<td>Lifecycle配置的容器，最多可容纳1000条规则。    类型：容器    子节点：Rule    父节点：无</td>
</tr>
<tr>
<td>Prefix</td>
<td>指定规则所适用的前缀。只有匹配前缀的对象才可能被该规则所影响。不可重叠。    类型：字符串    子节点：无    父节点：Rule</td>
</tr>
<tr>
<td>Rule</td>
<td>表述一条规则    类型：容器    子节点：ID，Prefix，Status，Expiration    父节点：LifecycleConfiguration</td>
</tr>
<tr>
<td>Status</td>
<td>如果其值为Enabled，那么Dstor会定期执行该规则；如果是Disabled，那么Dstor会忽略该规则。    类型：字符串    父节点：Rule    有效值：Enabled，Disabled</td>
</tr>
</tbody>
</table>
<h5 id="253">2.5.3、细节分析<a class="headerlink" href="#253" title="Permanent link">&para;</a></h5>
<ul>
<li>只有Bucket的拥有者才能发起Put Bucket Lifecycle请求，否则返回403 Forbidden消息。错误码：AccessDenied。</li>
<li>如果此前没有设置过Lifecycle，此操作会创建一个新的Lifecycle配置；否则，就覆写先前的配置。</li>
<li>对Object设置过期时间目前是以整天为单位，并且由于Dstor后台删除过期对象的时间并不是实时的，Object实际被删除的时间可能会比规则设置的时间要晚一天。</li>
</ul>
<h5 id="254">2.5.4、示例<a class="headerlink" href="#254" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/bucketname/?lifecycle</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">443</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Thu , 8 Jun 2017 13:08:38 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:PYbzsdWSMrAIWAlMW8luWekJ8=</span>

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;LifecycleConfiguration&gt;
  &lt;Rule&gt;
    &lt;ID&gt;delete objects after one day&lt;/ID&gt;
    &lt;Prefix&gt;logs/&lt;/Prefix&gt;
    &lt;Status&gt;Enabled&lt;/Status&gt;
    &lt;Expiration&gt;
      &lt;Days&gt;1&lt;/Days&gt;
&lt;/Expiration&gt;
&lt;/Rule&gt;
  &lt;Rule&gt;
    &lt;ID&gt;objects expire after 10 years&lt;/ID&gt;
    &lt;Prefix&gt;data/&lt;/Prefix&gt;
    &lt;Status&gt;Enabled&lt;/Status&gt;
    &lt;Expiration&gt;
      &lt;Days&gt;3600&lt;/Days&gt;
    &lt;/Expiration&gt;
  &lt;/Rule&gt;
&lt;/LifecycleConfiguration&gt;
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
x-amz-request-id: 534B371674E88A4D8906008B
Date: Thu , 8 Jun 2017 13:08:38 GMT
Content-Length: 0
Connection: keep-alive
</pre></div>
</td></tr></table>

<h4 id="26get-bucket-lifecycle">2.6、Get Bucket Lifecycle<a class="headerlink" href="#26get-bucket-lifecycle" title="Permanent link">&para;</a></h4>
<p>Get Bucket Lifecycle用于查看Bucket的Lifecycle配置。</p>
<h5 id="261">2.6.1、请求语法<a class="headerlink" href="#261" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/bucketname/?lifecycle</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="262">2.6.2、细节分析<a class="headerlink" href="#262" title="Permanent link">&para;</a></h5>
<ul>
<li>只有Bucket的拥有者才能查看Bucket的Lifecycle配置，否则返回403 Forbidden错误,错误码：AccessDenied。</li>
<li>如果Bucket或Lifecycle不存在，返回404 Not Found错误，错误码：NoSuchBucket或NoSuchLifecycle。</li>
</ul>
<h5 id="263">2.6.3、示例<a class="headerlink" href="#263" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Get /bucketname/?lifecycle HTTP/1.1
Host: api.dstor.dnion.com  
Date: Mon, 14 Apr 2014 01:17:29 GMT  
Authorization: AWS qn6qrrqxo2oawuk53otfjbyc:ceOEyZavKY4QcjoUWYSpYbJ3naA=
</pre></div>
</td></tr></table>

<p><strong>已设置Lifecycle的返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200
x-amz-request-id: 534B371674E88A4D8906008B
Date: Mon, 14 Apr 2014 01:17:29 GMT
Connection: keep-alive
Content-Length: 255
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;LifecycleConfiguration&gt;</span>
  <span class="nt">&lt;Rule&gt;</span>
    <span class="nt">&lt;ID&gt;</span>delete after one day<span class="nt">&lt;/ID&gt;</span>
    <span class="nt">&lt;Prefix&gt;</span>logs/<span class="nt">&lt;/Prefix&gt;</span>
    <span class="nt">&lt;Status&gt;</span>Enabled<span class="nt">&lt;/Status&gt;</span>
    <span class="nt">&lt;Expiration&gt;</span>
      <span class="nt">&lt;Days&gt;</span>1<span class="nt">&lt;/Days&gt;</span>
    <span class="nt">&lt;/Expiration&gt;</span>
  <span class="nt">&lt;/Rule&gt;</span>
<span class="nt">&lt;/LifecycleConfiguration&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>未设置Lifecycle的返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 404
x-amz-request-id: 534B371674E88A4D8906008B
Date: Mon, 14 Apr 2014 01:17:29 GMT
Connection: keep-alive
Content-Length: 0
</pre></div>
</td></tr></table>

<h4 id="27delete-bucket-lifecycle">2.7、Delete Bucket Lifecycle<a class="headerlink" href="#27delete-bucket-lifecycle" title="Permanent link">&para;</a></h4>
<p>通过Delete Bucket Lifecycle来删除指定Bucket的生命周期配置。</p>
<h5 id="271">2.7.1、请求语法<a class="headerlink" href="#271" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/bucketname/?lifecycle</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="272">2.7.2、细节分析<a class="headerlink" href="#272" title="Permanent link">&para;</a></h5>
<ul>
<li>本操作会删除指定Bucket的所有的生命周期规则。此后，该Bucket中不会有Object被自动删除。</li>
<li>只有Bucket的拥有者才能删除Bucket的Lifecycle配置。如果试图操作一个不属于你的Bucket，Dstor返回403 Forbidden错误，错误码：AccessDenied。</li>
</ul>
<h5 id="273">2.7.3、示例<a class="headerlink" href="#273" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/bucketname/?lifecycle</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com  </span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 14 Apr 2014 01:17:35 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:6ZVHOehYzxoC1yxRydPQs/CnMZU=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 204 No Content 
x-amz-request-id: 534B371674E88A4D8906008B
Date: Mon, 14 Apr 2014 01:17:35 GMT
Connection: keep-alive
Content-Length: 0 
</pre></div>
</td></tr></table>

<h3 id="3object">3、关于object的操作<a class="headerlink" href="#3object" title="Permanent link">&para;</a></h3>
<h4 id="31put-object">3.1、PUT Object<a class="headerlink" href="#31put-object" title="Permanent link">&para;</a></h4>
<p>PUT Object用于普通方式（另一种方式是分片上传）上传文件。</p>
<h5 id="311">3.1.1、请求语法<a class="headerlink" href="#311" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/BucketName/ObjectName</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="err">Content-Length：ContentLength</span>
Content-Type: ContentType
Host: api.dstor.dnion.com
Date: GMT Date
Authorization: AWS AccessKeyId:SignatureValue
</pre></div>
</td></tr></table>

<h5 id="312header">3.1.2、请求Header<a class="headerlink" href="#312header" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Content-MD5</td>
<td>根据协议RFC 1864对消息内容（不包括头部）计算MD5值获得128比特位数字，对该数字进行base64编码为一个消息的Content-MD5值。该请求头可用于消息合法性的检查（消息内容是否与发送时一致）。虽然该请求头是可选项，Dstor建议用户使用该请求头进行端到端检查。    类型：字符串    默认值：无     限制：无</td>
</tr>
<tr>
<td>Expires</td>
<td>过期时间；更详细描述请参照<a href="https://www.ietf.org/rfc/rfc2616.txt">RFC2616</a>。    类型：字符串    默认值：无     <strong>注意</strong>：Dstor不会对这个值进行限制和验证</td>
</tr>
</tbody>
</table>
<h5 id="313">3.1.3、细节分析<a class="headerlink" href="#313" title="Permanent link">&para;</a></h5>
<ul>
<li>如果用户上传了Content-MD5请求头，Dstor会计算body的Content-MD5并检查一致性，如果不一致，将返回InvalidDigest错误码。</li>
<li>如果请求头中的“Content-Length”值小于实际请求体（body）中传输的数据长度，Dstor将返回失败。</li>
<li>如果试图添加的Object的同名文件已经存在，并且有访问权限。新添加的文件将覆盖原来的文件，成功返回200 OK。</li>
<li>如果在PUT Object的时候，携带以x-amz-meta-为前缀的参数，则视为user meta，比如x-amz-meta-location。一个Object可以有多个类似的参数，但所有的user meta总大小不能超过8k。</li>
<li>如果Header中没有加入Content length参数，会返回411 Length Required错误。错误码：MissingContentLength。</li>
<li>如果设定了长度，但是没有发送消息Body，或者发送的body大小小于给定大小，服务器会一直等待，直到time out，返回400 Bad Request消息。错误码：RequestTimeout。</li>
<li>如果试图添加的Object所在的Bucket不存在，返回404 Not Found错误。错误码：NoSuchBucket。</li>
<li>如果试图添加的Object所在的Bucket没有访问权限，返回403 Forbidden错误。错误码：AccessDenied。</li>
<li>
<p>如果添加文件长度超过5G(超过5G的文件可以使用Mutipart Upload方式上传)，返回错误消息400 Bad Request。错误码：InvalidArgument。</p>
</li>
<li>
<p>如果传入的Object key长度大于1023字节，返回400 Bad Request。错误码：InvalidObjectName。</p>
</li>
<li>PUT一个Object的时候，Dstor支持5个 HTTP <a href="https://www.ietf.org/rfc/rfc2616.txt">RFC2616</a>协议规定的Header 字段：Cache-Control、Expires、Content-Encoding、Content-Disposition、Content-Type。如果上传Object时设置了这些Header，则这个Object被下载时，相应的Header值会被自动设置成上传时的值。</li>
</ul>
<h5 id="314content-md5">3.1.4、Content-MD5计算规则<a class="headerlink" href="#314content-md5" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">以上传的内容为</span><span class="s2">&quot;123456789&quot;</span><span class="err">来说，计算这个字符串的</span><span class="n">Content</span><span class="o">-</span><span class="n">MD5</span>

<span class="err">正确的计算方式：</span>
<span class="mf">1.</span> <span class="err">先计算</span><span class="n">MD5</span><span class="err">加密的二进制数组（</span><span class="mi">128</span><span class="err">位）。</span>
<span class="mf">2.</span> <span class="err">再对这个二进制进行</span><span class="n">base64</span><span class="err">编码（而不是对</span><span class="mi">32</span><span class="err">位字符串编码）。</span> 


<span class="err">以</span><span class="n">Python</span><span class="err">为例子：</span>
<span class="err">正确计算的代码为：</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">base64</span><span class="o">,</span><span class="nn">hashlib</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;0123456789&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="nb">hash</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>
<span class="s1">&#39;eB5eJF1ptWaXm4bijSPyxw==&#39;</span>

<span class="err">需要注意</span>
<span class="err">正确的是：</span><span class="nb">hash</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span><span class="err">，计算出进制数组（</span><span class="mi">128</span><span class="err">位）</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
<span class="s1">&#39;x</span><span class="se">\x1e</span><span class="s1">^$]i</span><span class="se">\xb5</span><span class="s1">f</span><span class="se">\x97\x9b\x86\xe2\x8d</span><span class="s1">#</span><span class="se">\xf2\xc7</span><span class="s1">&#39;</span>

<span class="err">常见错误是直接对计算出的</span><span class="mi">32</span><span class="err">位字符串编码进行</span><span class="n">base64</span><span class="err">编码。</span>
<span class="err">例如，错误的是：</span><span class="nb">hash</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span><span class="err">，计算得到可见的</span><span class="mi">32</span><span class="err">位字符串编码</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="s1">&#39;781e5e245d69b566979b86e28d23f2c7&#39;</span>
<span class="err">错误的</span><span class="n">MD5</span><span class="err">值进行</span><span class="n">base64</span><span class="err">编码后的结果：</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="nb">hash</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">())</span>
<span class="s1">&#39;NzgxZTVlMjQ1ZDY5YjU2Njk3OWI4NmUyOGQyM2YyYzc=&#39;</span>
</pre></div>
</td></tr></table>

<h5 id="315">3.1.5、示例<a class="headerlink" href="#315" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/test-bucket/test.jpg</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Content-Encoding</span><span class="o">:</span> <span class="l">utf-8</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 06:03:28 GMT</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">image/jpg</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">344606</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:kZoYNv66bsmc10+dcGKw5x2PRrk=</span>

[344606 bytes of object data]
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
Date: Fri, 24 Feb 2017 18:52:34 GMT
Content-Length: 0
Connection: keep-alive
x-amz-request-id: 5650BD72207FB30443962F9A
ETag: &quot;A797938C31D59EDD08D86188F6D5B872&quot;
</pre></div>
</td></tr></table>

<h4 id="32head-object">3.2、HEAD Object<a class="headerlink" href="#32head-object" title="Permanent link">&para;</a></h4>
<p>Head Object只返回某个Object的meta信息，不返回文件内容。</p>
<h5 id="321">3.2.1、请求语法<a class="headerlink" href="#321" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">HEAD</span> <span class="nn">/ObjectName</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="322">3.2.2、细节分析<a class="headerlink" href="#322" title="Permanent link">&para;</a></h5>
<ul>
<li>不论正常返回200 OK还是非正常返回，Head Object都不返回消息体。</li>
<li>如果用户在PutObject的时候传入以x-amz-meta-为开头的user meta，比如x-amz-meta-location，返回消息时，返回这些user meta。</li>
<li>如果文件不存在返回404 Not Found错误。</li>
<li>响应头中Content-Length、ETag、Content-Md5 均为目标文件的元信息。</li>
</ul>
<h5 id="323">3.2.3、示例<a class="headerlink" href="#323" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">HEAD</span> <span class="nn">/test-bucket/test.jpg</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 06:38:30 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:UNQDb7GapEgJCZkcde6OhZ9Jfe8=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
x-amz-request-id: 3a89276f-2e2d-7965-3ff9-51c875b99c41
Date: Fri, 24 Feb 2017 06:38:30 GMT
Last-Modified: Fri, 24 Feb 2012 06:07:48 GMT
ETag: &quot;fba9dede5f27731c9771645a39863328&quot;
Content-Length: 344606
Content-Type: image/jpg
Connection: keep-alive
</pre></div>
</td></tr></table>

<h4 id="33get-object">3.3、GET Object<a class="headerlink" href="#33get-object" title="Permanent link">&para;</a></h4>
<p>用于获取某个Object，此操作要求用户对该Object有读权限。</p>
<h5 id="331">3.3.1、请求语法<a class="headerlink" href="#331" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/BucketName/ObjectName</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
<span class="na">Range</span><span class="o">:</span> <span class="l">bytes=ByteRange(可选)</span>
</pre></div>
</td></tr></table>

<h5 id="332header">3.3.2、请求Header<a class="headerlink" href="#332header" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Range</td>
<td>指定文件传输的范围。如，设定 bytes=0-9，表示传送第0到第9这10个字符。    类型：字符串    默认值：无</td>
</tr>
</tbody>
</table>
<h5 id="333">3.3.3、细节分析<a class="headerlink" href="#333" title="Permanent link">&para;</a></h5>
<ul>
<li>GET Object通过range参数可以支持断点续传，对于比较大的Object建议使用该功能。</li>
<li>如果在请求头中使用Range参数；则返回消息中会包含整个文件的长度和此次返回的范围，例如：Content-Range: bytes 0-9/44，表示整个文件长度为44，此次返回的范围为0-9。如果不符合范围规范，则返回400错误。</li>
<li>如果文件不存在返回404 Not Found错误。错误码：NoSuchKey。</li>
<li>在自定义Dstor返回请求中的一些Header时，只有请求处理成功（即返回码为200时），Dstor才会将请求的header设置成用户GET请求参数中指定的值。</li>
</ul>
<h5 id="334">3.3.4、示例<a class="headerlink" href="#334" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/test-bucket/test.jpg</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 06:38:30 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:UNQDb7GapEgJCZkcde6OhZ9Jfe8=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
x-amz-request-id: 3a89276f-2e2d-7965-3ff9-51c875b99c41
Date: Fri, 24 Feb 2017 06:38:30 GMT
Last-Modified: Fri, 24 Feb 2012 06:07:48 GMT
ETag: &quot;5B3C1A2E053D763E1B002CC607C5A0FE &quot;
Content-Type: image/jpg
Content-Length: 344606

[344606 bytes of object data]
</pre></div>
</td></tr></table>

<p><strong>Range请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/test-bucket/test.jpg</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 05:38:42 GMT</span>
<span class="na">Range</span><span class="o">:</span> <span class="l">bytes=10-100</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:qZzjF3DUtd+yK16BdhGtFcCVknM=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 206 Partial Content
x-amz-request-id: 28f6508f-15ea-8224-234e-c0ce40734b89
x-amz-object-type: Normal
Date: Fri, 24 Feb 2017 05:38:42 GMT
ETag: &quot;5B3C1A2E053D763E1B002CC607C5A0FE &quot;
Accept-Ranges: bytes
Content-Range: bytes 10-100/344606
Content-Type: image/jpg
Content-Length: 91

[91 bytes of object data]
</pre></div>
</td></tr></table>

<h4 id="34delete-object">3.4、DELETE Object<a class="headerlink" href="#34delete-object" title="Permanent link">&para;</a></h4>
<p>DeleteObject用于删除某个Object。</p>
<h5 id="341">3.4.1、请求语法<a class="headerlink" href="#341" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/BucketName/ObjectName</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="342">3.4.2、细节分析<a class="headerlink" href="#342" title="Permanent link">&para;</a></h5>
<ul>
<li>DeleteObject要求对该Object要有写权限。</li>
<li>如果要删除的Object不存在，Dstor也返回状态码204（ No Content）。</li>
<li>如果Bucket不存在，返回404 Not Found。</li>
</ul>
<h5 id="343">3.4.3、示例<a class="headerlink" href="#343" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/test-bucket/test.jpg</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 07:45:28 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:zUglwRPGkbByZxm1+y4eyu+NIUs=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 204 NoContent
x-amz-request-id: 559CC9BDC755F95A64485981
Date: Fri, 24 Feb 2017 07:45:28 GMT
Content-Length: 0
Connection: keep-alive
</pre></div>
</td></tr></table>

<h4 id="35copy-object">3.5、Copy Object<a class="headerlink" href="#35copy-object" title="Permanent link">&para;</a></h4>
<h3 id="4multipart-upload">4、关于Multipart Upload的操作<a class="headerlink" href="#4multipart-upload" title="Permanent link">&para;</a></h3>
<p>除了通过PUT Object接口上传文件到Dstor以外，Dstor还提供了另外一种上传模式——Multipart Upload。用户可以在如下的应用场景内（但不仅限于此），使用Multipart Upload上传模式，如：
<em> 需要支持断点上传。
</em> 上传超过100MB大小的文件。
<em> 网络条件较差，和Dstor的服务器之间的链接经常断开。
</em> 需要流式地上传文件。
* 上传文件之前，无法确定上传文件的总大小。</p>
<h4 id="41initiate-multipart-upload">4.1、Initiate Multipart Upload<a class="headerlink" href="#41initiate-multipart-upload" title="Permanent link">&para;</a></h4>
<p>使用Multipart Upload模式传输数据前，必须先调用该接口来通知Dstor初始化一个Multipart Upload事件。该接口会返回一个Dstor服务器创建的全局唯一的Upload ID，用于标识本次Multipart Upload事件。用户可以根据这个ID来发起相关的操作，如中止Multipart Upload、查询Multipart Upload等。</p>
<h5 id="411">4.1.1、请求语法<a class="headerlink" href="#411" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/BucketName/ObjectName?uploads</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="412response-elements">4.1.2、响应元素(Response Elements)<a class="headerlink" href="#412response-elements" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Bucket</td>
<td>初始化一个Multipart Upload事件的Bucket名称。     类型：字符串     父节点：InitiateMultipartUploadResult</td>
</tr>
<tr>
<td>InitiateMultipartUploadResult</td>
<td>保存Initiate Multipart Upload请求结果的容器。     类型：容器     子节点：Bucket, Key, UploadId     父节点：None</td>
</tr>
<tr>
<td>Key</td>
<td>初始化一个Multipart Upload事件的Object名称。     类型：字符串     父节点：InitiateMultipartUploadResult</td>
</tr>
<tr>
<td>UploadId</td>
<td>唯一标示此次Multipart Upload事件的ID。     类型：字符串     父节点：InitiateMultipartUploadResult</td>
</tr>
</tbody>
</table>
<h5 id="413">4.1.3、细节分析<a class="headerlink" href="#413" title="Permanent link">&para;</a></h5>
<ul>
<li>该操作计算认证签名的时候，需要加“?uploads”到CanonicalizedResource中。</li>
<li>初始化Multipart Upload请求，支持如下标准的HTTP请求头： Content-Encoding，Content-Type，Expires，以及以“x-amz-meta-”开头的用户自定义Headers。具体含义请参见PUT Object接口。</li>
<li>初始化Multipart Upload请求，并不会影响已经存在的同名object。</li>
<li>服务器收到初始化Multipart Upload请求后，会返回一个XML格式的请求体。该请求体内有三个元素：Bucket，Key和UploadID。请记录下其中的UploadID，以用于后续的Multipart相关操作。</li>
</ul>
<h5 id="414">4.1.4、示例<a class="headerlink" href="#414" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/test-bucket/test.data?uploads</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 24 Feb 2017 08:32:21 GMT</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS qn6qrrqxo2oawuk53otfjbyc:/cluRFtRwMTZpC2hTj4F67AGdM4=</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
Content-Length: 230
Connection: keep-alive
x-amz-request-id: 42c25703-7503-fbd8-670a-bda01eaec618
Date: Fri, 24 Feb 2017 08:32:21 GMT
Content-Type: application/xml

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;InitiateMultipartUploadResult</span> <span class="na">xmlns=</span><span class="s">“http://s3.amazonaws.com/doc/2006-03-01/”</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Bucket&gt;</span>test-bucket<span class="nt">&lt;/Bucket&gt;</span>
    <span class="nt">&lt;Key&gt;</span>test.data<span class="nt">&lt;/Key&gt;</span>
    <span class="nt">&lt;UploadId&gt;</span>0004B9894A22E5B1888A1E29F8236E2D<span class="nt">&lt;/UploadId&gt;</span>
<span class="nt">&lt;/InitiateMultipartUploadResult&gt;</span>
</pre></div>
</td></tr></table>

<h4 id="42upload-part">4.2、Upload Part<a class="headerlink" href="#42upload-part" title="Permanent link">&para;</a></h4>
<p>初始化一个Multipart Upload之后，可以根据指定的Object名和Upload ID来分块（Part）上传数据。每一个上传的Part都有一个标识它的号码（part number，范围是1~10,000）。对于同一个Upload ID，该号码不但唯一标识这一块数据，也标识了这块数据在整个文件内的相对位置。如果你用同一个part号码，上传了新的数据，那么Dstor上已有的这个号码的Part数据将被覆盖。除了最后一块Part以外，其他的part最小为100KB；最后一块Part没有大小限制。</p>
<h5 id="421">4.2.1、请求语法<a class="headerlink" href="#421" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/BucketName/ObjectName?partNumber=PartNumber&amp;uploadId=UploadId</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">Size</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="422">4.2.2、细节分析<a class="headerlink" href="#422" title="Permanent link">&para;</a></h5>
<ul>
<li>调用该接口上传Part数据前，必须调用Initiate Multipart Upload接口，获取一个Dstor服务器颁发的Upload ID。</li>
<li>Multipart Upload要求除最后一个Part以外，其他的Part大小都要大于100KB。但是Upload Part接口并不会立即校验上传Part的大小（因为不知道是否为最后一块）；只有当Complete Multipart Upload的时候才会校验。</li>
<li>Dstor会将服务器端收到Part数据的MD5值放在ETag头内返回给用户。</li>
<li>Part号码的范围是1~10000。如果超出这个范围，Dstor将返回InvalidArgument的错误码。</li>
<li>为了保证数据在网络传输过程中不出现错误，用户发送请求时携带Content-MD5，Dstor会计算上传数据的MD5与用户上传的MD5值比较，如果不一致返回InvalidDigest错误码。</li>
</ul>
<h5 id="423">4.2.3、示例<a class="headerlink" href="#423" title="Permanent link">&para;</a></h5>
<p><strong>请求示例:</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/test-bucket/test.data?partNumber=1&amp;uploadId=0004B9895DBBB6EC98E36</span>  <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="err">Content-Length：6291456</span>
Date: Fri, 24 Feb 2017 08:32:21 GMT
Authorization: AWS qn6qrrqxo2oawuk53otfjbyc:J/lICfXEvPmmSW86bBAfMmUmWjI=

[6291456 bytes data]
</pre></div>
</td></tr></table>

<p><strong>返回示例:</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
Connection: keep-alive
ETag: 7265F4D211B56873A381D321F586E4A9
x-amz-request-id: 3e6aba62-1eae-d246-6118-8ff42cd0c21a
Date: Fri, 24 Feb 2017 08:32:21 GMT
</pre></div>
</td></tr></table>

<h4 id="43complete-multipart-upload">4.3、Complete Multipart Upload<a class="headerlink" href="#43complete-multipart-upload" title="Permanent link">&para;</a></h4>
<p>在将所有数据Part都上传完成后，必须调用Complete Multipart Upload API来完成整个文件的Multipart Upload。在执行该操作时，用户必须提供所有有效的数据Part的列表（包括part号码和ETAG）；Dstor收到用户提交的Part列表后，会逐一验证每个数据Part的有效性。当所有的数据Part验证通过后，Dstor将把这些数据part组合成一个完整的Object。</p>
<h5 id="431">4.3.1、请求语法<a class="headerlink" href="#431" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/BucketName/ObjectName?uploadId=UploadId</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">Size</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>

&lt;CompleteMultipartUpload&gt;
&lt;Part&gt;
&lt;PartNumber&gt;PartNumber&lt;/PartNumber&gt;
&lt;ETag&gt;ETag&lt;/ETag&gt;
&lt;/Part&gt;
...
&lt;/CompleteMultipartUpload&gt;
</pre></div>
</td></tr></table>

<h5 id="432request-parameters">4.3.2、请求参数(Request Parameters)<a class="headerlink" href="#432request-parameters" title="Permanent link">&para;</a></h5>
<p>Complete Multipart Upload时，可以通过encoding-type对返回结果中的Key进行编码。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>encoding-type</td>
<td>指定对返回的Key进行编码，目前支持url编码。Key使用UTF-8字符，但xml 1.0标准不支持解析一些控制字符，比如ascii值从0到10的字符。对于Key中包含xml 1.0标准不支持的控制字符，可以通过指定encoding-type对返回的Key进行编码。    数据类型：字符串    默认值：无,可选值：url</td>
</tr>
</tbody>
</table>
<h5 id="433request-elements">4.3.3、请求元素(Request Elements)<a class="headerlink" href="#433request-elements" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>CompleteMultipartUpload</td>
<td>保存Complete Multipart Upload请求内容的容器。     类型：容器     子节点：一个或多个Part元素     父节点：无</td>
</tr>
<tr>
<td>ETag</td>
<td>Part成功上传后，Dstor返回的ETag值。     类型：字符串     父节点：Part</td>
</tr>
<tr>
<td>Part</td>
<td>保存已经上传Part信息的容器。     类型：容器     子节点：ETag, PartNumber     父节点：InitiateMultipartUploadResult</td>
</tr>
<tr>
<td>PartNumber</td>
<td>Part数目。     类型：整数     父节点：Part</td>
</tr>
</tbody>
</table>
<h5 id="434response-elements">4.3.4、响应元素(Response Elements)<a class="headerlink" href="#434response-elements" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Bucket</td>
<td>Bucket名称。     类型：字符串     父节点：CompleteMultipartUploadResult</td>
</tr>
<tr>
<td>CompleteMultipartUploadResult</td>
<td>保存Complete Multipart Upload请求结果的容器。     类型：容器     子节点：Bucket, Key, ETag, Location     父节点：None</td>
</tr>
<tr>
<td>ETag</td>
<td>ETag   (entity tag) 在每个Object生成的时候被创建，用于标示一个Object的内容。Complete Multipart Upload请求创建的Object，ETag值是其内容的UUID。ETag值可以用于检查Object内容是否发生变化。.     类型：字符串     父节点：CompleteMultipartUploadResult</td>
</tr>
<tr>
<td>Location</td>
<td>新创建Object的URL。     类型：字符串     父节点：CompleteMultipartUploadResult</td>
</tr>
<tr>
<td>Key</td>
<td>新创建Object的名字。     类型：字符串     父节点：CompleteMultipartUploadResult</td>
</tr>
<tr>
<td>EncodingType</td>
<td>指明返回结果中编码使用的类型。如果请求的参数中指定了encoding-type，那返回的结果会对Key进行编码。    类型：字符串    父节点：容器</td>
</tr>
</tbody>
</table>
<h5 id="435">4.3.5、细节分析<a class="headerlink" href="#435" title="Permanent link">&para;</a></h5>
<ul>
<li>Complete Multipart Upload时，会确认除最后一块以外所有块的大小都大于100KB，并检查用户提交的Partlist中的每一个Part号码和Etag。所以在上传Part时，客户端除了需要记录Part号码外，还需要记录每次上传Part成功后，服务器返回的ETag值。</li>
<li>Dstor处理Complete Multipart Upload请求时，会持续一定的时间。在这段时间内，如果客户端和Dstor之间的链接断掉，Dstor仍会继续将请求做完。</li>
<li>用户提交的Part List中,Part号码可以是不连续的。例如第一块的Part号码是1；第二块的Part号码是5。</li>
<li>Dstor处理Complete Multipart Upload请求成功后，该Upload ID就会变成无效。</li>
<li>同一个Object可以同时拥有不同的Upload Id，当Complete一个Upload ID后，该Object的其他Upload ID不受影响。</li>
<li>若调用Initiate Multipart Upload接口时，指定了x-amz-server-side-encryption请求头，则在Complete Multipart Upload的响应头中，会返回x-amz-server-side-encryption，其值表明该Object的服务器端加密算法。</li>
<li>如果用户上传了Content-MD5请求头，Dstor会计算body的Content-MD5并检查一致性，如果不一致，将返回InvalidDigest错误码。</li>
</ul>
<h5 id="436">4.3.6、示例<a class="headerlink" href="#436" title="Permanent link">&para;</a></h5>
<p><strong>请求示例:</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">POST /test-bucket/multipart.data? uploadId=0004B9B2D2F7815C432C9057C03134D4  HTTP/1.1</span>
<span class="err">Host: api.dstor.dnion.com</span>
<span class="err">Content-Length: 1056</span>
<span class="err">Date: Fri, 24 Feb 2017 10:19:18 GMT</span>
<span class="err">Authorization: AWS qn6qrrqxo2oawuk53otfjbyc:8VwFhFUWmVecK6jQlHlXMK/zMT0=</span>

<span class="err">&lt;CompleteMultipartUpload&gt; </span>
<span class="err">    &lt;Part&gt; </span>
<span class="err">        &lt;PartNumber&gt;1&lt;/PartNumber&gt;  </span>
<span class="err">        &lt;ETag&gt;&quot;3349DC700140D7F86A078484278075A9&quot;&lt;/ETag&gt; </span>
<span class="err">    &lt;/Part&gt;  </span>
<span class="err">    &lt;Part&gt; </span>
<span class="err">        &lt;PartNumber&gt;2&lt;/PartNumber&gt;  </span>
<span class="err">        &lt;ETag&gt;&quot;8EFDA8BE206636A695359836FE0A0E0A&quot;&lt;/ETag&gt; </span>
<span class="err">    &lt;/Part&gt;  </span>
<span class="err">    &lt;Part&gt; </span>
<span class="err">        &lt;PartNumber&gt;3&lt;/PartNumber&gt;  </span>
<span class="err">        &lt;ETag&gt;&quot;8C315065167132444177411FDA149B92&quot;&lt;/ETag&gt; </span>
<span class="err">    &lt;/Part&gt; </span>
<span class="err">&lt;/CompleteMultipartUpload&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>返回示例:</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 OK
Content-Length: 329
Content-Type: Application/xml
Connection: keep-alive
x-amz-request-id: 594f0751-3b1e-168f-4501-4ac71d217d6e
Date: Fri, 24 Feb 2017 10:19:18 GMT

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;CompleteMultipartUploadResult</span> <span class="na">xmlns=</span><span class="s">“http://s3.amazonaws.com/doc/2006-03-01/”</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Bucket&gt;</span>test-bucket<span class="nt">&lt;/Bucket&gt;</span>
    <span class="nt">&lt;Key&gt;</span>test.data<span class="nt">&lt;/Key&gt;</span>
    <span class="nt">&lt;ETag&gt;</span>B864DB6A936D376F9F8D3ED3BBE540DD-3<span class="nt">&lt;/ETag&gt;</span>
<span class="nt">&lt;/CompleteMultipartUploadResult&gt;</span>
</pre></div>
</td></tr></table>

<h4 id="44abort-multipart-upload">4.4、Abort Multipart Upload<a class="headerlink" href="#44abort-multipart-upload" title="Permanent link">&para;</a></h4>
<p>该接口可以根据用户提供的Upload ID中止其对应的Multipart Upload事件。当一个Multipart Upload事件被中止后，就不能再使用这个Upload ID做任何操作，已经上传的Part数据也会被删除。</p>
<h5 id="441">4.4.1、请求语法<a class="headerlink" href="#441" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/BucketName/ObjectName?uploadId=UploadId</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.dstor.dnion.com</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">GMT Date</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">AWS AccessKeyId:SignatureValue</span>
</pre></div>
</td></tr></table>

<h5 id="442">4.4.2、细节分析<a class="headerlink" href="#442" title="Permanent link">&para;</a></h5>
<ul>
<li>中止一个Multipart Upload事件时，如果其所属的某些Part仍然在上传，那么这次中止操作将无法删除这些Part。所以如果存在并发访问的情况，为了彻底释放Dstor上的空间，需要调用几次Abort Multipart Upload接口。</li>
<li>如果输入的Upload Id不存在，Dstor会返回404错误，错误码为：NoSuchUpload。</li>
</ul>
<h5 id="443">4.4.3、示例<a class="headerlink" href="#443" title="Permanent link">&para;</a></h5>
<p><strong>请求示例:</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Delete /bucketname/multipart.data?&amp;uploadId=0004B9895DBBB6EC98E  HTTP/1.1
Host: api.dstor.dnion.com
Date: Wed, 22 Feb 2012 08:32:21 GMT
Authorization: AWS qn6qrrqxo2oawuk53otfjbyc:J/lICfXEvPmmSW86bBAfMmUmWjI=
</pre></div>
</td></tr></table>

<p><strong>返回示例:</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 204 
Connection: keep-alive
x-amz-request-id: 059a22ba-6ba9-daed-5f3a-e48027df344d
Date: Wed, 22 Feb 2012 08:32:21 GMT
</pre></div>
</td></tr></table>

<h4 id="45list-parts">4.5、List Parts<a class="headerlink" href="#45list-parts" title="Permanent link">&para;</a></h4>
<p>List Parts命令可以罗列出指定Upload ID所属的所有已经上传成功Part。</p>
<h5 id="451">4.5.1、请求语法<a class="headerlink" href="#451" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Get  /BucketName/ObjectName?uploadId=UploadId HTTP/1.1
Host: api.dstor.dnion.com
Date: GMT Date
Authorization: AWS AccessKeyId:SignatureValue
</pre></div>
</td></tr></table>

<h5 id="452request-parameters">4.5.2、请求参数(Request Parameters)<a class="headerlink" href="#452request-parameters" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>uploadId</td>
<td>Multipart Upload事件的ID。     类型：字符串     默认值：无</td>
</tr>
<tr>
<td>max-parts</td>
<td>规定在Dstor响应中的最大Part数目。     类型：整数     默认值：1,000</td>
</tr>
<tr>
<td>part-number-marker</td>
<td>指定List的起始位置，只有Part Number数目大于该参数的Part会被列出。     类型：整数     默认值：无</td>
</tr>
<tr>
<td>encoding-type</td>
<td>指定对返回的内容进行编码，指定编码的类型。Key使用UTF-8字符，但xml 1.0标准不支持解析一些控制字符，比如ascii值从0到10的字符。对于Key中包含xml 1.0标准不支持的控制字符，可以通过指定encoding-type对返回的Key进行编码。    数据类型：字符串    默认值：无，可选值：url</td>
</tr>
</tbody>
</table>
<h5 id="453response-elements">4.5.3、响应元素(Response Elements)<a class="headerlink" href="#453response-elements" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ListPartsResult</td>
<td>保存List Part请求结果的容器。     类型：容器     子节点：Bucket,   Key, UploadId, PartNumberMarker, NextPartNumberMarker, MaxParts, IsTruncated,   Part     父节点：无</td>
</tr>
<tr>
<td>Bucket</td>
<td>Bucket名称。     类型：字符串     父节点：ListPartsResult</td>
</tr>
<tr>
<td>EncodingType</td>
<td>指明对返回结果进行编码使用的类型。如果请求的参数中指定了encoding-type，那会对返回结果中的Key进行编码。    类型：字符串    父节点：ListPartsResult</td>
</tr>
<tr>
<td>Key</td>
<td>Object名称。     类型：字符串     父节点：ListPartsResult</td>
</tr>
<tr>
<td>UploadId</td>
<td>Upload事件ID。     类型：字符串     父节点：ListPartsResult</td>
</tr>
<tr>
<td>PartNumberMarker</td>
<td>本次List结果的Part Number起始位置。     类型：整数     父节点：ListPartsResult</td>
</tr>
<tr>
<td>NextPartNumberMarker</td>
<td>如果本次没有返回全部结果，响应请求中将包含NextPartNumberMarker元素，用于标明接下来请求的PartNumberMarker值。     类型：整数     父节点：ListPartsResult</td>
</tr>
<tr>
<td>MaxParts</td>
<td>返回请求中最大的Part数目。     类型：整数     父节点：ListPartsResult</td>
</tr>
<tr>
<td>IsTruncated</td>
<td>标明是否本次返回的List   Part结果列表被截断。“true”表示本次没有返回全部结果；“false”表示本次已经返回了全部结果。     类型：枚举字符串 有效值：true、false     父节点：ListPartsResult</td>
</tr>
<tr>
<td>Part</td>
<td>保存Part信息的容器。     类型：字符串     子节点：PartNumber,LastModified,   ETag, Size     父节点：ListPartsResult</td>
</tr>
<tr>
<td>PartNumber</td>
<td>标示Part的数字。     类型：整数     父节点：ListPartsResult.Part</td>
</tr>
<tr>
<td>LastModified</td>
<td>Part上传的时间。     类型：日期     父节点：ListPartsResult.part</td>
</tr>
<tr>
<td>ETag</td>
<td>已上传Part内容的ETag。     类型：字符串     父节点：ListPartsResult.Part</td>
</tr>
<tr>
<td>Size</td>
<td>已上传Part大小。     类型：整数     父节点：ListPartsResult.Part</td>
</tr>
</tbody>
</table>
<h5 id="454">4.5.4、细节分析<a class="headerlink" href="#454" title="Permanent link">&para;</a></h5>
<ul>
<li>List Parts支持max-parts和part-number-marker两种请求参数。</li>
<li>max-parts参数最大值为1000；默认值也为1000。</li>
<li>在Dstor的返回结果按照Part号码升序排列。</li>
<li>由于网络传输可能出错，所以不推荐用List Part出来的结果（Part Number和ETag值）来生成最后Complete Multipart的Part列表。</li>
</ul>
<h5 id="455">4.5.5、示例<a class="headerlink" href="#455" title="Permanent link">&para;</a></h5>
<p><strong>请求示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Get  /bucketname/multipart.data?uploadId=0004B999EF5A239BB9138C6227D69F95  HTTP/1.1
Host: api.dstor.dnion.com
Date: Thu, 23 Feb 2012 07:13:28 GMT
Authorization: AWS qn6qrrqxo2oawuk53otfjbyc:4qOnUMc9UQWqkz8wDqD3lIsa9P8=
</pre></div>
</td></tr></table>

<p><strong>返回示例：</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>HTTP/1.1 200 
Connection: keep-alive
Content-length: 1221
Content-type: application/xml
x-amz-request-id: 106452c8-10ff-812d-736e-c865294afc1c
Date: Thu, 23 Feb 2012 07:13:28 GMT

<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ListPartsResult</span> <span class="na">xmlns=</span><span class="s">&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Bucket&gt;</span>bucketname<span class="nt">&lt;/Bucket&gt;</span>
    <span class="nt">&lt;Key&gt;</span>multipart.data<span class="nt">&lt;/Key&gt;</span>
    <span class="nt">&lt;UploadId&gt;</span>0004B999EF5A239BB9138C6227D69F95<span class="nt">&lt;/UploadId&gt;</span>
    <span class="nt">&lt;NextPartNumberMarker&gt;</span>5<span class="nt">&lt;/NextPartNumberMarker&gt;</span>
    <span class="nt">&lt;MaxParts&gt;</span>1000<span class="nt">&lt;/MaxParts&gt;</span>
    <span class="nt">&lt;IsTruncated&gt;</span>false<span class="nt">&lt;/IsTruncated&gt;</span>
    <span class="nt">&lt;Part&gt;</span>
        <span class="nt">&lt;PartNumber&gt;</span>1<span class="nt">&lt;/PartNumber&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-23T07:01:34.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>3349DC700140D7F86A078484278075A9<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Size&gt;</span>6291456<span class="nt">&lt;/Size&gt;</span>
    <span class="nt">&lt;/Part&gt;</span>
    <span class="nt">&lt;Part&gt;</span>
        <span class="nt">&lt;PartNumber&gt;</span>2<span class="nt">&lt;/PartNumber&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-23T07:01:12.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>3349DC700140D7F86A078484278075A9<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Size&gt;</span>6291456<span class="nt">&lt;/Size&gt;</span>
    <span class="nt">&lt;/Part&gt;</span>
    <span class="nt">&lt;Part&gt;</span>
        <span class="nt">&lt;PartNumber&gt;</span>3<span class="nt">&lt;/PartNumber&gt;</span>
        <span class="nt">&lt;LastModified&gt;</span>2012-02-23T07:02:03.000Z<span class="nt">&lt;/LastModified&gt;</span>
        <span class="nt">&lt;ETag&gt;</span><span class="ni">&amp;quot;</span>7265F4D211B56873A381D321F586E4A9<span class="ni">&amp;quot;</span><span class="nt">&lt;/ETag&gt;</span>
        <span class="nt">&lt;Size&gt;</span>1024<span class="nt">&lt;/Size&gt;</span>
    <span class="nt">&lt;/Part&gt;</span>
<span class="nt">&lt;/ListPartsResult&gt;</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../生活/life/" title="首页" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                首页
              </span>
            </div>
          </a>
        
        
          <a href="../linux/ELK/" title="ELK+filebeat+kafka日志分析系统" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                ELK+filebeat+kafka日志分析系统
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.1",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>